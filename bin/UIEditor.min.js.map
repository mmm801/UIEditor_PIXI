{"version":3,"sources":["../src/director.js","../src/DragManager.js","../src/DragObject.js","../src/EditController.js","../src/editor.js","../src/element9Slice.js","../src/elementBase.js","../src/elementPic.js","../src/elementShape.js","../src/elementText.js","../src/elementUI.js","../src/frameSet.js","../src/Layout.js","../src/Project.js","../src/ScrollDragManager.js","../src/SelectDragManager.js","../src/SimpleButton.js","../src/UILoader.js","../src/UIManager.js","../src/util.js"],"names":["Director","observerPool","this","addObserver","target","msgName","func","obj","arr","hasOwnProperty","key","push","postMsg","i","len","length","len1","arguments","param","apply","removeObserver","splice","taret","fun","changeScene","app","targetName","doRun","frame","stage","alpha","content","fade","requestAnimationFrame","onEnter","UIManager","getInstance","uiPool","currentFile","filePool","DragManager","maxID","dragPool","enabled","addDragObj","cb","dragWidth","dragHeight","dragObj","DragObject","id","callBack","undefined","packageEvent","removeDrag","removeEvent","interactive","buttonMode","removeListener","onMouseUp","event","stopPropagation","eventData","onMove","document","body","removeEventListener","parent","addChildAt","self","zindex","dragComplete","pt","data","getLocalPosition","x","posX","mouseX","y","posY","mouseY","xx","yy","moveCallBack","on","getChildIndex","addChild","addEventListener","maxWidth","maxHeight","downTime","sourceX","sourceY","scrollSpdx","scrollSpdy","dragMask","EditController","keyDown","keycode","keyCode","ctrlKey","metaKey","preventDefault","shiftKey","actionIndex","actionList","rollBack","rollNext","addAction","json","onkeydown","window","onload","Editor","elmJsonMap","rootId","waitPool","pixiApp","pixiLayout","currentFrameNum","currentElm","stageContent","PIXI","Graphics","stageMask","setZoom","value","scale","Point","setMask","mask","updateSceneSize","clear","beginFill","parseInt","UIProject","currentUI","backcolor","drawRect","width","height","endFill","updateView","initStage","divName","Application","getElementById","appendChild","view","Layout","visible","setJsonMap","ui","update","removeAll","drawElm","elementUpdate","elm","pop","removeFromParent","errorNo","parentElm","getElmById","childrenNum","childElm","order","layer","loadSceneOver","screenType","loadElmData","sceneUrl","$","get","Math","random","jsonObj","JSON","parse","error","xhr","errorText","errorType","sort","a","b","elmFactory","checkRootLevel","changeElm","updateChild","doChange","doElementUpdate","getPropertiesHtml","updateFrameSetProperty","setSelect","checkFrame","currentEditor","updateLayout","addPaste","jsonStr","elmCreate","addUI","UIElement","addPic","pic","PicElement","addText","txt","TextElement","oldData","stringify","getJson","newData","action","elmId","addSlice9","shape","Slice9Element","addShape","ShapeElement","delElm","removeChildById","layerClick","type","selectElm","hiddenElm","lockElm","moveElm","enterElm","moveComplete","updateMove","res","levelNum","instName","innerHTML","tmpList","removeChild","updateLayer","targetElm","index","swapIndex","swapElm","tmp","swapChildren","alert","destroy","deleteFrameSet","addFrameSet","frameSet","FrameSet","getCheckFrameObj","scaleX","scaleY","getViewXValue","PosTypeX","getViewYValue","PosTypeY","rotation","resName","changeFrame","frameNum","getFrameSet","actionName","actionTime","interval","getPropertyContent","disable","resMap","b_continue","selectFrame","removeAction","keyPointDrag","floor","ceil","BaseElement","call","defaultResKey","leftWidth","topHeight","rightWidth","bottomHeight","percentWidth","percentHeight","texture","loaderRes","mesh","NineSlicePlane","getBaseJsonObj","setJson","setBaseJson","pivot","anchorX","anchorY","getBasePropertiesDiv","baseChangeElm","baseUpdateView","Container","maxElmNum","frameSetList","list","getPrevKeyFrame","getNextKeyFrame","Layer","hiddenButton","setTitle","lockButton","currentFrame","getObject","nextFrame","prevFrame","obj2","obj1","frame1","parseFloat","toFixed","getPosXValue","getPosYValue","textureJson","textureName","display","updatePosition","PI","checked","oldValue","PosTypeXList","PosTypeYList","key1","frameObj","getPropertiesDiv","Sprite","color","jscolor","onFineChange","text","size","style","fontSize","fill","Text","fileMap","uiId","loader","UILoader","updateUI","loadJson","uiKeyPool","fileName","div","cursorComplete","round","cursorMove","frameClick","cursor","timeLine","Cursor","ScrollDragManager","scrollTop","block","line","elmObj","hiddenClick","lockClick","moveClick","enterClick","button","SimpleButton","moveButton","TimeLine","str","updateKeyPoint","FrameView","keyPoint","setKeyPoint","getCurrentAction","keyPointDragOver","back","drawCircle","e","uiFileNum","loadRes","file","files","reader","FileReader","onAssetsLoaded","updateFileList","result","loaders","Loader","add","crossOrigin","load","readAsText","initWithData","url","ajax","dataType","beforeSend","success","msg","doLoad","console","log","doEnterUIFile","UIFile","save","saveData","blob","Blob","String","fromCharCode","aLink","createElement","href","URL","createObjectURL","evt","MouseEvent","dispatchEvent","revokeObjectURL","initDiv","divObject","doNewFile","newFile","updateFileProperty","enterUIFile","doDelUIFile","delUIFile","changeFile","getChange","uiFile","getHtml","addNewAction","name","time","uiAction","UIAction","deleteAction","changeAction","selectAction","paste","pasteData","clipboardData","getData","copy","setData","cut","undo","redo","UIData","bindClassName","autoResize","PosTypeX_Right","PosType_Percentage","PosTypeY_Bottom","divObj","checkDragObj","scrollAnimate","isOver","abs","Date","getTime","dx","dy","SelectDragManager","title","font","align","txtTitle","elmPool","clsPool","animate","children","removeChildAt","hasAnimateObject","eval","uiAnimate","getAnimate","play","j","uiAnimate1","UIAnimate","addElmObj","ii","maxFrame","animateObj","frameList","getElmByName","elmName","getBtnByName","state","UIAnimate_State_Stop","intervalFrame","completeFun","userData","autoRemove","elmList","defaultInterval","loopNum","maxLoopNum","setFrameSet","stop","loop","UIAnimate_State_Runing","run","loadURL","renderer","settings","RENDER_OPTIONS","resolution","options","createUIByName","UIBase","getRandomNum","Min","Max","Range","Rand","alertLog","Array","prototype","slice","join","ajaxData","async","contentType","createxmlHttpRequest","responseType","open","setRequestHeader","send","convertData","onreadystatechange","readyState","status","response","ActiveXObject","XMLHttpRequest","convertResult","c","substring","instance","devicePixelRatio","PosTypeX_Left","PosTypeY_Up","Object","create"],"mappings":"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","file":"UIEditor.min.js","sourcesContent":["\n\n\n\nfunction Director(){\n\tvar observerPool = {};\n\n\n\tthis.addObserver = function(target,msgName,func){\n\t\tvar obj = {};\n\t\tobj.target = target;\n\t\tobj.func = func;\n\t\tvar arr=[];\n\t\tif(observerPool.hasOwnProperty(msgName)){\n\t\t\tarr = observerPool[msgName];\n\t\t}else{\n\t\t\tobserverPool[msgName]=arr;\n\t\t}\n\t\tfor(var key in arr){\n\t\t\tif (arr[key].target==target && arr[key].func==func){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tarr.push(obj);\n\t};\n\tthis.postMsg = function(msgName){\n\t\t\n\t\tif(observerPool.hasOwnProperty(msgName)){\n\t\t\tvar arr = observerPool[msgName];\n\t\t\tvar len = arr.length;\n\t\t\tvar obj=null;\n\t\t\tvar i;\n\t\t\tvar len1 = arguments.length;\n\t\t\tvar param = [];\n\t\t\tfor(i=1;i<len1;i++){\n\t\t\t\tparam.push(arguments[i]);\n\t\t\t}\n\t\t\tfor(i = len-1;i>=0;i--){\n\t\t\t\tobj = arr[i];\n\t\t\t\tvar func = obj.func;\n\t\t\t\tif(param.length>0){\n\t\t\t\t\t\n\t\t\t\t\tfunc.apply(obj.target,param);\n\t\t\t\t}else{\n\t\t\t\t\tfunc.apply(obj.target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.removeObserver = function(msgName){\n\t\tif(observerPool.hasOwnProperty(msgName)){\n\t\t\tvar arr = observerPool[msgName];\n\t\t\tvar len = arr.length;\n\t\t\tvar obj=null;\n\t\t\tfor(var i = len-1;i>=0;i--){\n\t\t\t\tobj = arr[i];\n\t\t\t\tif(obj.target == target){\n\t\t\t\t\tarr.splice(i,1);\n\t\t\t\t\tobj.taret=null;\n\t\t\t\t\tobj.fun=null;\n\t\t\t\t\tobj=null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.changeScene = function(app,targetName){\n\t\tvar frame = 0;\n\t\tvar fade = false;\n\t\tvar target = UIManager.getInstance().uiPool[targetName];\n\t\ttarget.content.alpha = 0;\n\t\tUIManager.getInstance().currentFile = UIManager.getInstance().filePool[targetName];\n\t\tdoRun();\n\t\tfunction doRun(){\n\t\t\tif(frame==20){\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif(frame<20){\n\t\t\t\tframe++;\n\t\t\t\tif(frame==10){\n\t\t\t\t\tapp.stage.alpha=1;\n\t\t\t\t\tapp.stage = target.content;\n\t\t\t\t\tfade = true;\n\t\t\t\t}\n\t\t\t\trequestAnimationFrame(doRun);\n\t\t\t}\n\n\t\t\tif(fade===false){\n\t\t\t\tapp.stage.alpha-=0.1;\n\t\t\t}else{\n\t\t\t\ttarget.content.alpha+=0.1;\n\t\t\t\tif(frame==20){\n\t\t\t\t\ttarget.content.alpha = 1;\n\n\t\t\t\t\ttarget.onEnter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t};\n}\n\nDirector.instance = null;\n\nDirector.getInstance = function(){\n\tif(Director.instance===null){\n\t\tDirector.instance = new Director();\n\t}\n\treturn Director.instance;\n}","\r\nfunction DragManager(){\r\n\r\n  this.maxID = 1;\r\n  this.dragPool = [];\r\n  \r\n\r\n  this.enabled = true;\r\n\r\n  this.addDragObj = function(target,cb,dragWidth,dragHeight){\r\n    var dragObj = new DragObject();\r\n    dragObj.id = this.maxID;\r\n    dragObj.target = target;\r\n    dragObj.callBack = cb;\r\n\r\n    if(dragWidth!=undefined){\r\n      dragObj.dragWidth = dragWidth;\r\n    }\r\n    if(dragHeight!=undefined){\r\n      dragObj.dragHeight = dragHeight;\r\n    }\r\n\r\n    this.maxID++;\r\n    this.dragPool.push(dragObj);\r\n    this.packageEvent(dragObj);\r\n    return dragObj;\r\n  };\r\n  this.removeDrag = function(target){\r\n      var dragObj = null;\r\n      for(var key in this.dragPool){\r\n        if(this.dragPool[key].target==target){\r\n          dragObj = this.dragPool[key];\r\n          this.dragPool.splice(key,1);\r\n          this.removeEvent(dragObj);\r\n          break;\r\n        }\r\n      }\r\n      \r\n  };\r\n\r\n\r\n\r\n  this.removeEvent = function(dragObj){\r\n    dragObj.target.interactive = false;\r\n    dragObj.target.buttonMode = false;\r\n\r\n    dragObj.target.removeListener('mousedown');\r\n  };\r\n  \r\n  this.packageEvent = function(dragObj){\r\n    var self = dragObj;\r\n\r\n    dragObj.target.interactive = true;\r\n    dragObj.target.buttonMode = true;\r\n\r\n    var zindex = -1;\r\n    dragObj.target.on('mousedown',function onMouseDown(event){\r\n      event.stopPropagation();\r\n\r\n    \r\n      if(self.enabled==false){\r\n        return ;\r\n      }\r\n      zindex = self.target.parent.getChildIndex(self.target);\r\n\r\n      self.target.parent.addChild(self.target);\r\n      var pt = event.data.getLocalPosition(self.target.parent);\r\n      self.target.alpha=0.5;\r\n   \t\tself.posX = self.target.x;\r\n\t   \tself.posY = self.target.y;\r\n   \t\tself.eventData = event.data;\r\n\r\n   \t\tself.mouseX = pt.x;\r\n\t   \tself.mouseY = pt.y;\r\n      \r\n\r\n        self.target.on('mousemove',onMove);\r\n        self.target.on('mouseup',onMouseUp);\r\n        document.body.addEventListener(\"mouseup\", onMouseUp);\r\n\r\n\r\n    });\r\n\r\n\r\n    //dragObj.target.on('mouseout',onMouseUp);\r\n    function onMouseUp(event){\r\n      event.stopPropagation();\r\n      dragObj.target.alpha = 1;\r\n      dragObj.eventData = null;\r\n      dragObj.target.removeListener('mousemove',onMove);\r\n      dragObj.target.removeListener('mouseup',onMouseUp);\r\n      document.body.removeEventListener(\"mouseup\",onMouseUp);\r\n      dragObj.target.parent.addChildAt(self.target,zindex);\r\n\r\n      dragObj.dragComplete();\r\n    }\r\n\r\n\r\n    function onMove(event){\r\n      event.stopPropagation();\r\n      var pt = event.data.getLocalPosition(this.parent);\r\n      if(self.eventData){\r\n        if(self.dragWidth == -1 || self.dragHeight == -1) {\r\n          self.target.x = self.posX + pt.x - self.mouseX;\r\n          self.target.y = self.posY + pt.y - self.mouseY;\r\n        }else{\r\n          var xx = pt.x - self.mouseX;\r\n          var yy = pt.y - self.mouseY;\r\n\r\n\r\n          self.target.x = self.posX+xx;\r\n          self.target.y = self.posY+yy;\r\n\r\n          if(self.target.x>self.dragWidth){\r\n            self.target.x = self.dragWidth;\r\n          }else if(self.target.x<0){\r\n            self.target.x=0;\r\n          }\r\n          if(self.target.y>self.dragHeight){\r\n            self.target.y = self.dragHeight;\r\n          }else if(self.target.y<0){\r\n            self.target.y=0;\r\n          }\r\n        }\r\n      }\r\n      if(self.moveCallBack!=null){\r\n        self.moveCallBack(self.target);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nDragManager.instance = null;\r\n\r\nDragManager.getInstance = function(){\r\n  if(DragManager.instance==null){\r\n    DragManager.instance = new DragManager();\r\n  }\r\n  return DragManager.instance;\r\n}\r\n","function DragObject(){\r\n  this.target=null;\r\n  this.callBack = null;\r\n  this.moveCallBack = null;\r\n  this.posX =-1;\r\n  this.posY = -1;\r\n  this.eventData = null;\r\n  this.mouseX = -1;\r\n  this.mouseY = -1;\r\n\r\n  this.dragWidth = -1;\r\n  this.dragHeight = -1;\r\n  this.maxWidth = -1;\r\n  this.maxHeight = -1;\r\n  this.downTime = 0;\r\n\r\n  this.sourceX = -1;\r\n  this.sourceY = -1;\r\n  this.scrollSpdx = 0;\r\n  this.scrollSpdy = 0;\r\n\r\n  this.dragMask = null;\r\n  \r\n\r\n  this.dragComplete = function(){\r\n    if(this.callBack){\r\n      this.callBack(this.target);\r\n    }\r\n  }\r\n  \r\n}\r\n","\nfunction EditController() {\n\n\n    var actionList = [];\n    var actionIndex = 0;\n\n    this.rollBack = function(){\n        actionIndex--;\n    }\n\n    this.rollNext = function(){\n        actionIndex++;\n    }\n\n    this.addAction = function(json){\n        if(actionList.length!=actionIndex) {\n            actionList.splice(actionIndex , actionList.length - actionIndex);\n        }\n\n        actionList.push(json);\n        actionIndex++;\n\n    }\n    function keyDown(event) {\n        var keycode = event.keyCode;\n\n\n        if((event.ctrlKey || event.metaKey) && keycode ==83){\n            \n            Director.getInstance().postMsg(\"fileSave\");\n            event.preventDefault();\n            return false;\n        }\n\n        if((event.ctrlKey || event.metaKey) && event.shiftKey==false && keycode ==90){\n            if(actionIndex>0){\n                actionIndex--;\n                Director.getInstance().postMsg(\"fileUndo\",actionList[actionIndex]);\n            }\n\n            event.preventDefault();\n            return false;\n        }\n\n        if((event.ctrlKey || event.metaKey) && event.shiftKey && keycode ==90){\n\n            if(actionIndex<actionList.length){\n                Director.getInstance().postMsg(\"fileRedo\",actionList[actionIndex]);\n                actionIndex++;\n            }\n\n            event.preventDefault();\n            return false;\n        }\n\n\n    }\n\n    document.onkeydown = keyDown;\n\n    window.onload = function(){\n        document.body.addEventListener('paste',function(event){\n            var event = event || window.event;\n\n            Director.getInstance().postMsg(\"filePaste\",event);\n            event.preventDefault();\n            return false;\n        });\n\n        document.body.addEventListener('cut',function(event){\n            var event = event || window.event;\n\n            Director.getInstance().postMsg(\"fileCut\",event);\n            event.preventDefault();\n            return false;\n        });\n        document.body.addEventListener('copy',function(event){\n            var event = event || window.event;\n\n            Director.getInstance().postMsg(\"fileCopy\",event);\n            event.preventDefault();\n            return false;\n        });\n    }\n\n}\n\nEditController.instance = null;\n\nEditController.getInstance = function(){\n    if(EditController.instance===null){\n        EditController.instance = new EditController();\n    }\n    return EditController.instance;\n}","PIXI.settings.RENDER_OPTIONS.resolution = window.devicePixelRatio;\nPIXI.settings.RENDER_OPTIONS.autoResize = true;\n\nfunction Editor(){\n\t\n\n\tthis.arr = [];\t\t\t\t//BaseElement对象\n\n\tthis.elmJsonMap = null;//\n\tthis.rootId = 0;\t\t\t\t\t//BaseElement Id\n\tthis.waitPool = {};\t\t//当子对象需要的父尚未生成时，先存着\n\n\tthis.pixiApp = null;\n\tthis.pixiLayout = null;//new Layout();\n\n\tthis.currentFrameNum=0;\n\tthis.currentElm = null;\n\n\tthis.stageContent = new PIXI.Graphics();\n\tthis.stageMask = new PIXI.Graphics();\n\n\n\tthis.setZoom = function(value){\n\t\tthis.stageContent.scale = new PIXI.Point(value/100,value/100);\n\t}\n\tthis.setMask = function(value){\n\t\tif(value){\n\t\t\tthis.stageContent.mask = this.stageMask;\n\t\t}else{\n\t\t\tthis.stageContent.mask = null;\n\t\t}\n\t}\n\tthis.updateSceneSize = function(){\n\t\tthis.stageContent.clear();\n\t\tthis.stageContent.beginFill(parseInt(\"0x\"+UIProject.getInstance().currentUI.backcolor),1);\n\t\tthis.stageContent.drawRect(0,0,UIProject.getInstance().currentUI.width,UIProject.getInstance().currentUI.height);\n\t\tthis.stageContent.endFill();\n\n\t\tthis.stageMask.width = UIProject.getInstance().currentUI.width;\n\t\tthis.stageMask.height = UIProject.getInstance().currentUI.height;\n\n\t\tfor(var key in this.arr){\n\t\t\t//this.arr[key].updatePosition();\n\t\t\tthis.arr[key].updateView();\n\t\t}\n\t}\n\n\tthis.initStage = function(divName,width,height){\n\t\tthis.pixiApp=new PIXI.Application(width,height);\n\t\tdocument.getElementById(divName).appendChild(this.pixiApp.view);\n\n\t\tthis.pixiLayout = new Layout(width,height);\n\n\n\t\tthis.stageContent.beginFill(0xffffff,1);\n\t\tthis.stageContent.drawRect(0,0,600,400);\n\t\tthis.stageContent.endFill();\n\t\tthis.stageContent.x = (width-600)/2;\n\t\tthis.stageContent.y = (500-400)/2;\n\n\t\tDragManager.getInstance().addDragObj(this.stageContent);\n\n\t\tthis.stageMask.beginFill(0xff0000,1);\n\t\tthis.stageMask.drawRect(0,0,10,10);\n\t\tthis.stageMask.endFill();\n\n\t\tthis.stageMask.width = this.stageContent.width;\n\t\tthis.stageMask.height = this.stageContent.height;\n\t\tthis.stageMask.visible = false;\n\n\t\tthis.pixiApp.stage.addChild(this.stageContent);\n\t\tthis.stageContent.addChild(this.stageMask);\n\n\n\t\tthis.pixiApp.stage.addChild(this.pixiLayout);\n\n\t\tthis.pixiLayout.y = 500;\n\t\tthis.clear();\n\n\t}\n\n\tthis.clear = function(){\n\t\tthis.elmJsonMap = null;\n\t\t//this.pixiLayout.visible=false;\n\t}\n\tthis.setJsonMap = function(ui,update){\n\n\t\tthis.rootId = 0;\n\t\tthis.clear();\n\t\tthis.elmJsonMap = ui.elmJsonMap;\n\n\t\tthis.removeAll();\n\n\t\tthis.updateSceneSize();\n\n\t\tthis.drawElm(false);\n\t\tif(update==true) {\n\t\t\tvar len = this.arr.length;\n\t\t\tfor (var i = len - 1; i >= 0; i--) {\n\t\t\t\tif (this.arr[i].rootId == this.rootId) {\n\t\t\t\t\tthis.elementUpdate(this.arr[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tthis.removeAll = function(){\n\t\twhile(this.arr.length>0){\n\t\t\tvar elm = this.arr.pop();\n\t\t\telm.removeFromParent();\n\t\t}\n\t}\n\tthis.addChild = function(obj,update){\n\t\tif(obj.errorNo!=0){\n\t\t\treturn ;\n\t\t}\n\t\tvar parent = this.stageContent;\n\t\tvar parentElm = null;\n\t\tif(obj.rootId!=0){\n\t\t\tparentElm = this.getElmById(obj.rootId);\n\t\t\tif(parentElm == null){\n\t\t\t\tif(this.waitPool[obj.rootId] == null){\n\t\t\t\t\tthis.waitPool[obj.rootId] = [];\n\t\t\t\t}\n\t\t\t\tthis.waitPool[obj.rootId].push(obj);\n\t\t\t\tthis.arr.push(obj);\n\t\t\t\treturn ;\n\t\t\t}else{\n\t\t\t\tparentElm.childrenNum++;\n\t\t\t\tparent = parentElm.content;\n\t\t\t}\n\t\t}\n\n\t\tif(this.waitPool[obj.id] != null){\n\t\t\tvar len = this.waitPool[obj.id].length;\n\t\t\tvar childElm = null;\n\t\t\tobj.childrenNum+=len;\n\t\t\tfor(var i=0;i<len;i++){\n\t\t\t\tchildElm = this.waitPool[obj.id][i];\n\t\t\t\tobj.content.addChild(childElm.view);\n\t\t\t\tchildElm.order = obj.content.getChildIndex(childElm.view);\n\t\t\t}\n\t\t}\n\n\t\tparent.addChild(obj.view);\n\t\tobj.order = parent.getChildIndex(obj.view);\n\n\t\tthis.arr.push(obj);\n\n\n\t\tif(obj.rootId == this.rootId) {\n\t\t\tthis.pixiLayout.content.addChild(obj.layer);\n\n\t\t}\n\n\t\tif(update){\n\t\t\tDirector.getInstance().postMsg(\"elementUpdate\", obj);\n\t\t}\n\n\t}\n\tthis.loadSceneOver = function(json){\n\n\t\tif(json==null){\n\t\t\tthis.elmJsonMap = {};\n\t\t\tthis.initStage(this.screenType);\n\t\t}else{\n\t\t\tthis.elmJsonMap = json;\n\t\t\tthis.initStage(this.screenType);\n\t\t}\n\t}\n\tthis.loadElmData = function(sceneUrl){\n\t\t\n\t\tif(sceneUrl==null){\n\t\t\tDirector.getInstance().postMsg(\"loadSceneOver\",null);\n\t\t}else{\n\t\t\t$.get(\"/H5/\"+sceneUrl+\"?\"+Math.random(),function(data){\n\n\t\t\t\tvar jsonObj = JSON.parse(data);\n\t\t\t\tDirector.getInstance().postMsg(\"loadSceneOver\",jsonObj);\n\t\t\t}).error(function(xhr,errorText,errorType){\n\t\t\t\tDirector.getInstance().postMsg(\"loadSceneOver\",null);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tthis.drawElm = function(update){\n\t\n\t\tvar arr = [];\n\t\t\t\n\t\tfor(var key in this.elmJsonMap){\n\t\t\tarr.push(JSON.parse(this.elmJsonMap[key]));\n\t\t}\n\t\tarr.sort(function (a, b) {\n\n　　\t\t\treturn a.order- b.order;\n\t\t});\n\t\t\t\n\t\tvar len = arr.length;\n\t\tvar elm = null;\n\t\tfor(var i=0;i<len;i++){\n\t\t\telm = elmFactory(arr[i]);\n\t\t\tif(update){\n\t\t\t\tif(i==len-1){\n\t\t\t\t\tthis.addChild(elm,false);\n\t\t\t\t}else{\n\t\t\t\t\tthis.addChild(elm,false);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.addChild(elm,false);\n\t\t\t}\n\n\t\t}\n\t\tthis.checkRootLevel();\n\t}\n\n\tthis.changeElm = function (obj,id){\n\t\tthis.updateChild(obj,id);\n\t}\n\tthis.elementUpdate = function(elm){\n\t    if(this.elmJsonMap==null){\n\t        return ;\n        }\n\n\t\tthis.doChange(elm);\n\n\t\tthis.doElementUpdate(elm);\n\t}\n\tthis.doElementUpdate = function(elm){\n\t\telm.getPropertiesHtml();\n\t\tthis.updateFrameSetProperty(elm);\n\t\tif(this.currentElm!==null){\n\t\t\tthis.currentElm.layer.setSelect(false);\n\t\t}\n\t\tthis.currentElm = elm;\n\t\tthis.currentElm.layer.setSelect(true);\n\t\tthis.currentElm.checkFrame(UIProject.getInstance().currentEditor.currentFrameNum,UIProject.getInstance().currentUI.actionIndex);\n\t\tthis.updateLayout();\n\t}\n\n\n\tthis.addPaste = function(jsonStr){\n\t\tif(this.elmJsonMap==null){\n\t\t\treturn ;\n\t\t}\n\t\tvar obj = JSON.parse(jsonStr);\n\t\tvar elm = elmCreate(obj);\n\n\t\telm.rootId = this.rootId;\n\t\t//this.doChange(elm);\n\t\tthis.addChild(elm,true);\n\t}\n\tthis.addUI = function(){\n        if(this.elmJsonMap==null){\n            return ;\n        }\n        var ui = new UIElement();\n\t\t//ui.updateView();\n        ui.rootId = this.rootId;\n        this.addChild(ui,true);\n\n\n    };\n\tthis.addPic = function(){\n\t\tif(this.elmJsonMap==null){\n\t\t\treturn ;\n\t\t}\n\t\tvar pic = new PicElement();\n\t\tpic.rootId = this.rootId\n\t\tthis.addChild(pic,true);\n\t};\n\n\tthis.addText = function(){\n\t\tif(this.elmJsonMap==null){\n\t\t\treturn ;\n\t\t}\n\n\t\tvar txt = new TextElement();\n\t\ttxt.rootId = this.rootId\n\t\t//this.doChange(txt);\n\t\tthis.addChild(txt,true);\n\t}\n\n\n\tthis.doChange = function(elm){\n\t\tvar ui = UIProject.getInstance().currentUI;\n\t\tvar oldData = JSON.stringify(ui);\n\t\tthis.elmJsonMap[elm.id]=elm.getJson();\n\t\tvar newData = JSON.stringify(ui);\n\n\t\tEditController.getInstance().addAction({action:\"changeFile\",oldData:oldData,newData:newData,elmId:elm.id});\n\t}\n\tthis.addSlice9 = function(){\n\t\tif(this.elmJsonMap==null){\n\t\t\treturn ;\n\t\t}\n\t\tvar shape = new Slice9Element();\n\t\tshape.rootId = this.rootId;\n\t\tthis.addChild(shape,true);\n\t}\n\tthis.addShape = function(){\n\t\tif(this.elmJsonMap==null){\n\t\t\treturn ;\n\t\t}\n\n\t\tvar shape = new ShapeElement();\n\t\tshape.rootId = this.rootId;\n\t\tthis.addChild(shape,true);\n\t}\n\n\t\n\tthis.delElm = function(id){\n\t\tthis.removeChildById(id);\n\t\tdelete this.elmJsonMap[id];\n\t}\n\n\tthis.layerClick = function(elm,type){\n\t\tswitch(type){\n\t\t\tcase 1:\n\t\t\t\tUIProject.getInstance().currentEditor.selectElm(elm.id);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tUIProject.getInstance().currentEditor.hiddenElm(elm.id);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tUIProject.getInstance().currentEditor.lockElm(elm.id);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tUIProject.getInstance().currentEditor.moveElm(elm.id);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tUIProject.getInstance().currentEditor.enterElm(elm.id);\n\t\t\t\tbreak;\n\t\t}\n\n\t};\n\tthis.moveComplete = function(elm){\n\t\telm.updateMove(this.currentFrameNum);\n\t}\n\t\t\t\n\tDirector.getInstance().addObserver(this,\"elementUpdate\",this.elementUpdate);\n\tDirector.getInstance().addObserver(this,\"loadSceneOver\",this.loadSceneOver);\n\n\n\tDirector.getInstance().addObserver(this,\"moveComplete\",this.moveComplete);\n\tDirector.getInstance().addObserver(this,\"layerClick\",this.layerClick);\n\n\t\t\t\n\tthis.getJson = function(){\n\t\treturn JSON.stringify(this.elmJsonMap);\n\t};\n\n\tthis.updateLayout = function(){\n\n\t\tthis.arr.sort(function(a,b){return a.order>b.order?-1:1});\n\n\n\t\tvar res=\"<table>\"\n\t\tres +=\"<tr  class='cell'><td><a href='javascript:UIProject.getInstance().currentEditor.enterElm(0);'>root</a></td>\";\n\n\t\tvar rootId = this.rootId;\n\t\tvar levelNum = 0;\n\t\tvar elm = null;\n\t\twhile(rootId>0){\n\t\t\tlevelNum++;\n\t\t\telm = this.getElmById(rootId);\n\t\t\trootId = elm.rootId;\n\t\t\tres+=\"<td><a href ='javascript:UIProject.getInstance().currentEditor.enterElm(\"+elm.id+\");'>\"+elm.instName+\"</a></td>\";\n\t\t}\n\t\tif(levelNum<4){\n\t\t\tres+=\"<td colspan='\"+(4-levelNum)+\"'></td>\";\n\t\t}\n\t\tres+=\"</tr>\";\n\t\tres+= \"</table>\";\n\t\tdocument.getElementById(\"navigate\").innerHTML = res;\n\t\tvar tmpList = [];\n\t\tfor(var key in this.arr){\n\t\t\tif(this.arr[key].layer.parent){\n\t\t\t\tthis.arr[key].layer.parent.removeChild(this.arr[key].layer);\n\t\t\t}\n\t\t\tif(this.arr[key].rootId == this.rootId){\n\t\t\t\ttmpList.push(this.arr[key]);\n\t\t\t\tthis.pixiLayout.content.addChild(this.arr[key].layer);\n\t\t\t}\n\t\t}\n\t\tthis.pixiLayout.updateView(tmpList);\n\n\t}\n\n\tthis.updateChild = function(obj,id){\n\t\tvar len = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].id == id){\n\t\t\t\tthis.arr[i].changeElm(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tthis.selectElm = function (id){\n\t\tvar len = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].id == id){\n\n\t\t\t\tDirector.getInstance().postMsg(\"elementUpdate\",this.arr[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tthis.hiddenElm = function(id){\n\n\t\tvar elm = this.getElmById(id);\n\t\telm.view.visible = !elm.view.visible;\n\t\telm.updateLayer();\n\t}\n\tthis.lockElm = function(id){\n\n\t\tvar elm = this.getElmById(id);\n\t\telm.view.interactive = !elm.view.interactive;\n\t\telm.updateLayer();\n\t}\n\tthis.enterElm = function(id){\n\n\t\tthis.rootId = id;\n\n\t\tthis.checkRootLevel();\n\n\t\tvar len = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].rootId == this.rootId ){\n\t\t\t\tDirector.getInstance().postMsg(\"elementUpdate\",this.arr[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.updateLayout();\n\t}\n\tthis.checkRootLevel = function(){\n\t\tvar len = this.arr.length;\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].rootId == this.rootId ){\n\t\t\t\tthis.arr[i].view.interactive=true;\n\t\t\t\tthis.arr[i].view.buttonMode=true;\n\t\t\t}else{\n\t\t\t\tthis.arr[i].view.interactive=false;\n\t\t\t\tthis.arr[i].view.buttonMode=false;\n\t\t\t}\n\t\t}\n\t}\n\tthis.getElmById = function (id){\n\t\tvar len = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].id == id){\n\t\t\t\treturn this.arr[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tthis.moveElm = function(id){\n\t\tvar len = this.arr.length;\n\t\tvar targetElm = null;\n\n\t\ttargetElm = this.getElmById(id);\n\t\tif(targetElm==null){\n\t\t\treturn ;\n\t\t}\n\t\tvar index = this.stageContent.getChildIndex(targetElm.view);\n\t\tif(index==0){\n\t\t\treturn ;\n\t\t}\n\t\tvar swapIndex = index-1;\n\t\tvar swapElm = null;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar tmp = this.stageContent.getChildIndex(this.arr[i].view);\n\t\t\tif(tmp == swapIndex){\n\t\t\t\tswapElm = this.arr[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.stageContent.swapChildren(swapElm.view,targetElm.view);\n\n\t\tswapElm.order = index;\n\t\ttargetElm.order = index-1;\n\n\t\tthis.elmJsonMap[swapElm.id]=swapElm.getJson();\n\t\tthis.elmJsonMap[targetElm.id]=targetElm.getJson();\n\n\t\tthis.updateLayout();\n\t}\n\tthis.removeChildById = function(id){\n\t\tvar len = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].id == id){\n\t\t\t\tif(this.arr[i].childrenNum>0){\n\t\t\t\t\talert(\"请先删除子元素\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.arr[i].destroy();\n\t\t\t\t\tthis.arr.splice(i,1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlen = this.arr.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tif(this.arr[i].rootId == this.rootId){\n\t\t\t\tthis.arr[i].order = this.arr[i].view.parent.getChildIndex(this.arr[i].view);\n\t\t\t\tDirector.getInstance().postMsg(\"elementUpdate\",this.arr[i]);\n\t\t\t}\n\t\t}\n\t\tthis.updateLayout();\n\t}\n\tthis.deleteFrameSet = function(frame){\n\t\tthis.currentElm.deleteFrameSet(frame,UIProject.getInstance().currentUI.actionIndex);\n\t\tthis.elmJsonMap[this.currentElm.id]=this.currentElm.getJson();\n\t\tthis.updateFrameSetProperty(this.currentElm);\n\t\tthis.updateLayout();\n\t\tfor(var key in this.arr){\n\t\t\tthis.arr[key].checkFrame(frame,UIProject.getInstance().currentUI.actionIndex);\n\t\t}\n\t}\n\tthis.addFrameSet = function(frame){\n\t\tvar frameSet = new FrameSet();\n\t\tframeSet.frame = frame;\n\n\t\tvar obj = this.currentElm.getCheckFrameObj(frame,UIProject.getInstance().currentUI.actionIndex);\n\t\tif(obj!==null) {\n\t\t\tframeSet.width = obj.width;\n\t\t\tframeSet.height = obj.height;\n\t\t\tframeSet.scaleX = obj.scaleX;\n\t\t\tframeSet.scaleY = obj.scaleY;\n\n\t\t\tvar posX = UIProject.getInstance().currentUI.getViewXValue(this.currentElm.posX,this.currentElm.PosTypeX);\n\t\t\tvar posY = UIProject.getInstance().currentUI.getViewYValue(this.currentElm.posY,this.currentElm.PosTypeY);\n\n\t\t\tframeSet.posX = obj.posX-posX;\n\t\t\tframeSet.posY = obj.posY-posY;\n\t\t\tframeSet.rotation = obj.rotation;\n\t\t\tframeSet.alpha = obj.alpha;\n\n\t\t\tframeSet.visible = obj.visible;\n\n\t\t\tif (this.currentElm.type == \"pic\" ) {\n\t\t\t\tframeSet.resName = obj.resName;\n\t\t\t}\n\t\t}else{\n\t\t\tframeSet.width = this.currentElm.width;\n\t\t\tframeSet.height = this.currentElm.height;\n\t\t\tframeSet.scaleX = this.currentElm.scaleX;\n\t\t\tframeSet.scaleY = this.currentElm.scaleY;\n\t\t\tframeSet.posX = 0;\n\t\t\tframeSet.posY = 0;\n\t\t\tframeSet.rotation = this.currentElm.rotation;\n\n\t\t\tif (this.currentElm.type == \"pic\" ) {\n\t\t\t\tframeSet.resName = this.currentElm.resName;\n\t\t\t}\n\t\t}\n\n\t\tthis.currentElm.addFrameSet(frameSet,UIProject.getInstance().currentUI.actionIndex);\n\t\tthis.doChange(this.currentElm);\n\t\tthis.updateFrameSetProperty(this.currentElm);\n        this.updateLayout();\n\t};\n\tthis.changeFrame = function(obj,frameNum){\n\n\t\tvar frameSet = this.currentElm.getFrameSet(frameNum,UIProject.getInstance().currentUI.actionIndex);\n\t\tframeSet.changeFrame(obj,this.currentElm);\n\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this.currentElm);\n\t}\n\tthis.updateFrameSetProperty = function(elm){\n\t\tvar res = \"\";\n\t\tif(this.currentFrameNum==0){\n\n            for(var key in UIProject.getInstance().currentUI.actionList){\n\t\t\t\tres+=\"<div><input type='text' size = '10' id='action\"+key+\"' value='\"+UIProject.getInstance().currentUI.actionList[key].actionName+\"' onchange='UIProject.getInstance().changeAction(\"+key+\")'/>\";\n\t\t\t\tres+=\"<input type='text' size ='3' id='time\"+key+\"' value='\"+UIProject.getInstance().currentUI.actionList[key].actionTime+\"' onchange='UIProject.getInstance().changeAction(\"+key+\")'/>\";\n\t\t\t\tres+=\"<input type='text' size ='3' id='interval\"+key+\"' value='\"+UIProject.getInstance().currentUI.actionList[key].interval+\"' onchange='UIProject.getInstance().changeAction(\"+key+\")'/>\";\n                if(key != UIProject.getInstance().currentUI.actionIndex){\n\n                    res+=\"<button onclick='UIProject.getInstance().selectAction(\"+key+\");'>选择</button>\";\n\t\t\t\t\tres+=\"<button onclick='UIProject.getInstance().deleteAction(\"+key+\");'>删除</button>\";\n\t\t\t\t\tres+=\"</div>\";\n                }\n            }\n            res+=\"<div><input type='text' id='newAction' value='action\"+UIProject.getInstance().currentUI.actionList.length+\"' size='10'/>\";\n            res+=\"<input type='text' id='newTime' value='30' size='3'/>\";\n\t\t\tres+=\"<input type='text' id='newInterval' value='1' size='3'/>\";\n            res+=\"<button onclick='UIProject.getInstance().addNewAction();'>新增</button></div>\";\n\t\t\tdocument.getElementById(\"frameProperty\").innerHTML=res;\n\t\t\treturn ;\n\t\t}\n\t\tvar frameSet = elm.getCheckFrameObj(this.currentFrameNum,UIProject.getInstance().currentUI.actionIndex);\n\n\t\tif(frameSet==null){\n\t\t\tres += \"<div>FrameSet:\"+this.currentFrameNum+\"<button onclick='UIProject.getInstance().currentEditor.addFrameSet(\"+this.currentFrameNum+\")'>新建</button></div>\";\n\t\t}else {\n\t\t\tif(this.currentFrameNum == frameSet.frame) {\n\t\t\t\tres += \"<div>FrameSet:\" + frameSet.frame + \"<button onclick='UIProject.getInstance().currentEditor.deleteFrameSet(\" + this.currentFrameNum + \");'>删除</button></div>\";\n\t\t\t\tres += this.getPropertyContent(frameSet,elm,\"\");\n\t\t\t}else{\n\t\t\t\tres += \"<div>FrameSet:\"+this.currentFrameNum+\"<button onclick='UIProject.getInstance().currentEditor.addFrameSet(\"+this.currentFrameNum+\")'>新建</button></div>\";\n\n\t\t\t\tres += this.getPropertyContent(frameSet,elm,\"disabled\");\n\t\t\t}\n\t\t}\n\t\tdocument.getElementById(\"frameProperty\").innerHTML = res;\n\t};\n\n\tthis.getPropertyContent = function(frameSet,elm,disable){\n\n\n\t\tvar posX = UIProject.getInstance().currentUI.getViewXValue(elm.posX,elm.PosTypeX);\n\t\tvar posY = UIProject.getInstance().currentUI.getViewYValue(elm.posY,elm.PosTypeY);\n\n\t\tframeSet.posX-=posX;\n\t\tframeSet.posY-=posY;\n\t\tvar res = \"\";\n\t\tres += \"<table>\";\n\t\tres += \"<tr><td>宽:<input type='text' \"+disable+\" id='f_width' value='\" + frameSet.width + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td>\";\n\t\tres += \"<td>高:<input type='text' \"+disable+\" id='f_height' value='\" + frameSet.height + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\tres += \"<tr><td>X:<input type='text' \"+disable+\" id='f_x' value='\" + frameSet.posX + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td>\";\n\t\tres += \"<td>Y:<input type='text' id='f_y' \"+disable+\" value='\" + frameSet.posY + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\tres += \"<tr><td>scaleX:<input type='text' \"+disable+\" id='f_scaleX' value='\" + frameSet.scaleX + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td>\";\n\t\tres += \"<td>scaleY:<input type='text' \"+disable+\" id='f_scaleY' value='\" + frameSet.scaleY + \"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\tres += \"<tr><td colspan='2'>旋转:<input type='text' \"+disable+\" id='f_rotation' value='\" + frameSet.rotation + \"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\tres += \"<tr><td colspan='2'>透明度:<input type='text' \"+disable+\" id='f_alpha' value='\" + frameSet.alpha + \"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\n\t\tif (frameSet.visible) {\n\t\t\tres += \"<tr><td colspan='2'>显示:<input type='checkbox' \"+disable+\" id='f_visible' checked onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\t} else {\n\t\t\tres += \"<tr><td colspan='2'>显示:<input type='checkbox' \"+disable+\" id='f_visible' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\t}\n\n\t\tif (elm.type == \"pic\") {\n\t\t\tres += \"<tr><td>图片:</td><td>\";\n\n\t\t\tres += \"<select id='f_resName' \"+disable+\" onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'>\";\n\t\t\tfor (var key in UIProject.getInstance().resMap) {\n\t\t\t\tif (key == frameSet.resName) {\n\t\t\t\t\tres += \"<option value='\" + key + \"' selected>\" + key + \"</option>\";\n\t\t\t\t} else {\n\t\t\t\t\tres += \"<option value='\" + key + \"'>\" + key + \"</option>\";\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tres += \"</select>\";\n\t\t}\n\n\t\tif (frameSet.b_continue) {\n\t\t\tres += \"<tr><td colspan='2'>补间:<input type='checkbox' \"+disable+\" id='f_continue' checked onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\t} else {\n\t\t\tres += \"<tr><td colspan='2'>补间:<input type='checkbox' \"+disable+\" id='f_continue' onchange='UIProject.getInstance().currentEditor.changeFrame(this,\" + this.currentFrameNum + \");'/></td></tr>\";\n\t\t}\n\t\tres += \"</table>\";\n\n\t\treturn res;\n\t}\n\n\tthis.selectFrame = function(frame){\n\t\tthis.currentFrameNum = frame;\n\n\t\tfor(var key in this.arr){\n\t\t\tif(this.arr[key].rootId == this.rootId) {\n\t\t\t\tthis.arr[key].checkFrame(frame, UIProject.getInstance().currentUI.actionIndex);\n\t\t\t}\n\t\t}\n\t\tthis.updateFrameSetProperty(this.currentElm);\n\t};\n\tthis.removeAction = function(id){\n\t\tfor(var key in this.arr){\n\t\t\tif(this.arr[key].rootId == this.rootId) {\n\t\t\t\tthis.arr[key].removeAction(id);\n\t\t\t}\n\t\t}\n\t};\n\tthis.keyPointDrag = function(frame,value){\n\n\t\tvar frameSet = this.currentElm.getFrameSet(frame,UIProject.getInstance().currentUI.actionIndex);\n\t\tif(frameSet == null){\n\t\t\treturn ;\n\t\t}\n\n\t\tif(value>0){\n\t\t\tvalue = Math.floor((value-5)/10);\n\t\t}else{\n\t\t\tvalue = Math.ceil((value-5)/10);\n\t\t}\n\n\t\tframeSet.frame = value;\n\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this.currentElm);\n\n\t}\n\tDirector.getInstance().addObserver(this,\"keyPointDrag\",this.keyPointDrag);\n\tDirector.getInstance().addObserver(this,\"selectFrame\",this.selectFrame);\n\tDirector.getInstance().addObserver(this,\"updateSceneSize\",this.updateSceneSize);\n}\n\n","\r\nfunction Slice9Element(resName){\r\n\t\r\n\tBaseElement.call(this);\r\n\r\n\r\n\tthis.type = \"slice9\";\r\n\tthis.instName = this.type;\r\n\r\n\tif(resName==undefined) {\r\n\t\tthis.resName = UIProject.getInstance().defaultResKey;\r\n\t}else{\r\n\t\tthis.resName = resName;\r\n\t}\r\n\r\n\tthis.leftWidth = 10;\r\n\tthis.topHeight = 10;\r\n\tthis.rightWidth = 10;\r\n\tthis.bottomHeight = 10;\r\n\r\n\tthis.percentWidth = 0;\r\n\tthis.percentHeight = 0;\r\n\r\n\r\n\r\n\tvar self = this;\r\n\r\n\tvar texture = null;\r\n\r\n\t\tif(this.resName!==null) {\r\n\t\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\t\ttexture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t} else {\r\n\t\t\t\ttexture = UIManager.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t}\r\n\r\n\t\t\tthis.content = new PIXI.mesh.NineSlicePlane(texture,this.leftWidth,this.topHeight,this.rightWidth,this.bottomHeight);\r\n\r\n\t\t\tthis.width = this.content.width;\r\n\t\t\tthis.height = this.content.height;\r\n\t\t}else{\r\n\t\t\talert(\"请先加载res资源\");\r\n\t\t\tthis.errorNo = 1;\r\n\t\t\treturn ;\r\n\t\t}\r\n\r\n\r\n\r\n\tthis.view.addChild(this.content);\r\n\r\n\t\r\n\tthis.getJson = function(){\r\n\t\tvar obj = this.getBaseJsonObj();\r\n\t\tobj.resName=this.resName;\r\n\r\n\t\tobj.percentWidth = this.percentWidth;\r\n\t\tobj.percentHeight = this.percentHeight;\r\n\r\n\t\tobj.leftWidth = this.leftWidth;\r\n\t\tobj.topHeight = this.topHeight;\r\n\t\tobj.rightWidth = this.rightWidth;\r\n\t\tobj.bottomHeight = this.bottomHeight;\r\n\r\n\r\n\r\n\t\treturn JSON.stringify(obj);\r\n\t};\r\n\tthis.setJson = function(json){\r\n\t\tthis.setBaseJson(json);\r\n\t\tvar texture = null;\r\n\t\tthis.resName = json.resName;\r\n\r\n\r\n\t\tthis.percentWidth = json.percentWidth;\r\n\t\tthis.percentWidth = json.percentWidth;\r\n\r\n\r\n\t\tthis.leftWidth = json.leftWidth;\r\n\t\tthis.topHeight = json.topHeight;\r\n\t\tthis.rightWidth = json.rightWidth;\r\n\t\tthis.bottomHeight = json.bottomHeight;\r\n\r\n\t\tthis.updateView();\r\n\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\t};\r\n\t\r\n\tthis.getPropertiesHtml = function(){\r\n\t\t\r\n\t\tvar res=this.getBasePropertiesDiv();\r\n\r\n\t\tres+=\"<table border='1'>\";\r\n\t\tres+=\"<tr><td>图片:</td><td>\";\r\n\r\n\t\tres+=\"<select id='resName' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'>\";\r\n\t\tfor(var key in UIProject.getInstance().resMap){\r\n\t\t\tif(key == this.resName){\r\n\t\t\t\tres+=\"<option value='\"+key+\"' selected>\"+key+\"</option>\";\r\n\t\t\t}else{\r\n\t\t\t\tres+=\"<option value='\"+key+\"'>\"+key+\"</option>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tres+=\"</select>\";\r\n\t\tres+=\"</td></tr>\";\r\n\t\tres+=\"<tr><td>左:<input type='text' id='leftWidth' value='\"+this.leftWidth+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td><td>上:<input type='text' id='topHeight' value='\"+this.topHeight+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\t\tres+=\"<tr><td>右:<input type='text' id='rightWidth' value='\"+this.rightWidth+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td><td>下:<input type='text' id='bottomHeight' value='\"+this.bottomHeight+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\t\tres+=\"<tr><td>百分比宽:</td><td><input type='text' id='percentWidth' value='\"+this.percentWidth+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td>百分比高:</td><td><input type='text' id='percentHeight' value='\"+this.percentHeight+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\r\n\r\n\t\tres+=\"</table>\";\r\n\r\n\t\tdocument.getElementById(\"elmProperty\").innerHTML = res;\r\n\r\n\t};\r\n\tthis.changeElm = function(obj){\r\n\r\n\r\n\r\n\t\tthis.baseChangeElm(obj);\r\n\r\n\r\n\t\tif(obj.id == \"percentWidth\"){\r\n\t\t\tthis[obj.id] = parseInt(obj.value);\r\n\t\t\tif(this[obj.id]>100){\r\n\t\t\t\tthis[obj.id] = 100;\r\n\t\t\t}\r\n\t\t\tif(this[obj.id]<0){\r\n\t\t\t\tthis[obj.id] = 0;\r\n\t\t\t}\r\n\t\t\tthis.scaleX = 1;\r\n\t\t\t/*\r\n\t\t\tif(UIProject.getInstance().currentUI){\r\n\t\t\t\tthis.content.width = UIProject.getInstance().currentUI.width*this[obj.id]/100;\r\n\t\t\t}else{\r\n\t\t\t\tthis.content.width = UIManager.getInstance().currentFile.width*this[obj.id]/100;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t}\r\n\r\n\t\tif(obj.id == \"percentHeight\"){\r\n\t\t\tthis.scaleY = 1;\r\n\t\t\tthis[obj.id] = parseInt(obj.value);\r\n\t\t\tif(this[obj.id]>100){\r\n\t\t\t\tthis[obj.id] = 100;\r\n\t\t\t}\r\n\t\t\tif(this[obj.id]<0){\r\n\t\t\t\tthis[obj.id] = 0;\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tif(UIProject.getInstance().currentUI){\r\n\t\t\t\tthis.content.height = UIProject.getInstance().currentUI.height*this[obj.id]/100;\r\n\t\t\t}else{\r\n\t\t\t\tthis.content.height = UIManager.getInstance().currentFile.height*this[obj.id]/100;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (obj.id === \"leftWidth\" || obj.id === \"topHeight\" || obj.id === \"rightWidth\" || obj.id === \"bottomWidth\") {\r\n\r\n\t\t\tthis[obj.id] = parseInt(obj.value);\r\n\r\n\t\t\tthis.content.parent.removeChild(this.content);\r\n\r\n\t\t\tthis.content = new PIXI.mesh.NineSlicePlane(UIProject.getInstance().loaderRes[this.resName].texture,this.leftWidth,this.topHeight,this.rightWidth,this.bottomHeight);\r\n\r\n\t\t\tthis.view.addChild(this.content);\r\n\r\n\t\t\tthis.content.scale.x=this.scaleX;\r\n\t\t\tthis.content.scale.y=this.scaleY;\r\n\t\t\tthis.width = this.content.width;\r\n\t\t\tthis.height = this.content.height;\r\n\r\n\t\t}\r\n\r\n\t\tif(obj.id == \"resName\"){\r\n\r\n\t\t\tthis.resName = obj.value;\r\n\r\n\r\n\t\t\tthis.content.parent.removeChild(this.content);\r\n\r\n\t\t\tthis.content = new PIXI.mesh.NineSlicePlane(UIProject.getInstance().loaderRes[this.resName].texture,this.leftWidth,this.topHeight,this.rightWidth,this.bottomHeight);\r\n\r\n\t\t\tthis.view.addChild(this.content);\r\n\r\n\t\t\tthis.content.scale.x=this.scaleX;\r\n\t\t\tthis.content.scale.y=this.scaleY;\r\n\t\t\tthis.width = this.content.width;\r\n\t\t\tthis.height = this.content.height;\r\n\r\n\t\t}\r\n\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this);\r\n\t};\r\n\tthis.updateView = function(obj){\r\n\r\n\t\tvar texture = null;\r\n\r\n\t\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\t\ttexture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t} else {\r\n\t\t\t\ttexture = UIManager.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t}\r\n\r\n\t\tif(this.content.parent) {\r\n\t\t\tthis.content.parent.removeChild(this.content);\r\n\t\t}\r\n\r\n\t\tthis.content = new PIXI.mesh.NineSlicePlane(texture,this.leftWidth,this.topHeight,this.rightWidth,this.bottomHeight);\r\n\r\n\t\tthis.view.addChild(this.content);\r\n\r\n\t\tthis.content.scale.x = this.scaleX;\r\n\t\tthis.content.scale.y = this.scaleY;\r\n\r\n\t\tthis.content.width = this.width;\r\n\t\tthis.content.height = this.height;\r\n\r\n\r\n\r\n\r\n\t\tif(UIProject.getInstance().currentUI){\r\n\t\t\tif(this.percentWidth>0) {\r\n\t\t\t\tthis.content.width = UIProject.getInstance().currentUI.width * this.percentWidth / 100;\r\n\t\t\t}\r\n\t\t\tif(this.percentHeight>0){\r\n\t\t\t\tthis.content.height = UIProject.getInstance().currentUI.height*this.percentHeight/100;\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(this.percentWidth>0) {\r\n\t\t\t\tthis.content.width = UIManager.getInstance().currentFile.width * this.percentWidth / 100;\r\n\t\t\t}\r\n\t\t\tif(this.percentHeight>0) {\r\n\t\t\t\tthis.content.height = UIManager.getInstance().currentFile.height * this.percentHeight / 100;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.baseUpdateView(obj);\r\n\t};\r\n}","\r\nfunction elmCreate(obj){\r\n\tvar res = null;\r\n\tswitch(obj.type){\r\n\t\tcase \"shape\":\r\n\t\t\tres = new ShapeElement();\r\n\t\t\tres.setJson(obj);\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"ui\":\r\n\t\t\tres = new UIElement();\r\n\t\t\tres.setJson(obj);\r\n\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"pic\":\r\n\t\t\tres = new PicElement(obj.resName);\r\n\t\t\tres.setJson(obj);\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"text\":\r\n\t\t\tres = new TextElement();\r\n\t\t\tres.setJson(obj);\r\n\t\t\tbreak;\r\n\t\tcase \"slice9\":\r\n\r\n\t\t\tres = new Slice9Element(obj.resName);\r\n\t\t\tres.setJson(obj);\r\n\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction elmFactory(obj) {\r\n\r\n\tvar res = elmCreate(obj);\r\n\tres.id = obj.id;\r\n\treturn res;\r\n}\r\n\r\nvar PosTypeX_Left = 0;\r\nvar PosTypeX_Right = 1;\r\n\r\nvar PosTypeY_Up = 0;\r\nvar PosTypeY_Bottom = 1;\r\n\r\nvar PosType_Percentage = 2;\r\n\r\n\r\n\r\nvar PosTypeXList = [\"左\",\"右\",\"百分比\"];\r\nvar PosTypeYList = [\"上\",\"下\",\"百分比\"];\r\n\r\nfunction BaseElement(){\r\n\tthis.view = new PIXI.Container();\r\n\r\n\r\n\r\n\tthis.content = null;\r\n\r\n\tthis.errorNo = 0;\r\n\tthis.rootId=0;\r\n\tthis.childrenNum=0;\r\n\r\n\tUIProject.getInstance().maxElmNum++;\r\n\tthis.id=UIProject.getInstance().maxElmNum;\r\n\r\n\tthis.width=0;\r\n\tthis.height=0;\r\n\r\n\r\n\tthis.posX = 0;\r\n\tthis.posY = 0;\r\n\r\n\tthis.PosTypeX = 0;\r\n\tthis.PosTypeY = 0;\r\n\r\n\tthis.scaleX = 1;\r\n\tthis.scaleY = 1;\r\n\tthis.instName=\"instName\";\r\n\tthis.rotation = 0;\r\n\tthis.anchorX = 0;\r\n\tthis.anchorY = 0;\r\n\tthis.order=0;\r\n\tthis.alpha = 1;\r\n\tthis.visible = 1;\r\n\r\n\tthis.frameSetList = {};\r\n\r\n\r\n\t/////\r\n\r\n\r\n\r\n\r\n\tvar self = this;\r\n\r\n\tthis.deleteFrameSet = function(frame,actionIndex){\r\n\t\tfor(var key in this.frameSetList[actionIndex]){\r\n\t\t\tif(this.frameSetList[actionIndex][key].frame == frame){\r\n\t\t\t\tthis.frameSetList[actionIndex].splice(key,1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.frameSetList[actionIndex].sort(function(a,b){\r\n\t\t\tif(b.frame>a.frame){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t});\r\n\t};\r\n\tthis.removeAction = function(actionIndex){\r\n\t\tthis.frameSetList[actionIndex] = null;\r\n\t\tdelete this.frameSetList[actionIndex];\r\n\t}\r\n\tthis.addFrameSet = function(frameSet,actionIndex){\r\n\t\tif(this.frameSetList.hasOwnProperty(actionIndex)==false){\r\n\t\t\tthis.frameSetList[actionIndex]=[];\r\n\t\t}\r\n\t\tthis.frameSetList[actionIndex].push(frameSet);\r\n\t\tthis.frameSetList[actionIndex].sort(function(a,b){\r\n\t\t\tif(b.frame>a.frame){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t});\r\n\r\n\t}\r\n\tthis.getFrameSet = function(frame,actionIndex) {\r\n\t\tif(this.frameSetList.hasOwnProperty(actionIndex)==false){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar list = this.frameSetList[actionIndex];\r\n\t\tfor(var key in list){\r\n\t\t\tif(list[key].frame == frame){\r\n\t\t\t\treturn list[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tthis.getPrevKeyFrame = function(frame,actionIndex){\r\n\r\n\t\tif(this.frameSetList.hasOwnProperty(actionIndex)==false){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar frameSet = null;\r\n\t\tvar list = this.frameSetList[actionIndex];\r\n\r\n\t\tfor(var key in list){\r\n\t\t\tframeSet = list[key];\r\n\t\t\tif(frameSet.frame >= frame ){\r\n\t\t\t\tif(key>0) {\r\n\t\t\t\t\treturn list[key - 1];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn frameSet;\r\n\t};\r\n\r\n\tthis.getNextKeyFrame = function(frame,actionIndex){\r\n\t\tif(this.frameSetList.hasOwnProperty(actionIndex)==false){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar list = this.frameSetList[actionIndex];\r\n\t\tfor(var key in list){\r\n\t\t\tif(list[key].frame >= frame){\r\n\t\t\t\treturn list[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tthis.layerClick = function(){\r\n\t\tDirector.getInstance().postMsg(\"layerClick\",self);\r\n\t}\r\n\r\n\tthis.layer = new Layer(self);\r\n\r\n\tthis.updateLayer = function(){\r\n\t\tthis.layer.updateView(this);\r\n\t\tif(this.view.visible==false){\r\n\t\t\tthis.layer.hiddenButton.setTitle(\"显示\");\r\n\t\t}else{\r\n\t\t\tthis.layer.hiddenButton.setTitle(\"隐藏\");\r\n\t\t}\r\n\t\tif(this.view.interactive==false){\r\n\t\t\tthis.layer.lockButton.setTitle(\"解锁\");\r\n\t\t}else{\r\n\t\t\tthis.layer.lockButton.setTitle(\"上锁\");\r\n\t\t}\r\n\t};\r\n\r\n\tthis.getCheckFrameObj = function(frame,actionIndex){\r\n\t\tif(frame==0){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar currentFrame = this.getFrameSet(frame,actionIndex);\r\n\t\tif(currentFrame!==null){\r\n\r\n\t\t\treturn currentFrame.getObject(this);\r\n\t\t}\r\n\r\n\t\tvar obj = {};\r\n\r\n\t\tvar nextFrame = this.getNextKeyFrame(frame,actionIndex);\r\n\t\tvar prevFrame = this.getPrevKeyFrame(frame,actionIndex);\r\n\t\tif(nextFrame==null || nextFrame.b_continue==0){\r\n\t\t\tif(prevFrame==null){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn prevFrame.getObject(this);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tvar obj2 = nextFrame.getObject(this);\r\n\t\t\tvar obj1 = null\r\n\t\t\tif(prevFrame == null){\r\n\t\t\t\tobj1 = {};\r\n\t\t\t\tobj1.height = this.height;\r\n\t\t\t\tobj1.width = this.width;\r\n\t\t\t\tobj1.scaleX = this.scaleX;\r\n\t\t\t\tobj1.scaleY = this.scaleY;\r\n\t\t\t\tobj1.rotation = this.rotation;\r\n\t\t\t\tobj1.b_continue = this.b_continue;\r\n\r\n\r\n\t\t\t\tif(UIProject.getInstance().currentUI){\r\n\t\t\t\t\tvar posX = UIProject.getInstance().currentUI.getViewXValue(this.posX,this.PosTypeX);\r\n\t\t\t\t\tvar posY = UIProject.getInstance().currentUI.getViewYValue(this.posY,this.PosTypeY);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar posX = UIManager.getInstance().currentFile.getViewXValue(this.posX,this.PosTypeX);\r\n\t\t\t\t\tvar posY = UIManager.getInstance().currentFile.getViewYValue(this.posY,this.PosTypeY);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj1.posX = posX;\r\n\t\t\t\tobj1.posY = posY;\r\n\t\t\t\tobj1.alpha = this.alpha;\r\n\t\t\t\tobj1.visible = this.visible;\r\n\t\t\t\tobj1.frame = 0;\r\n\t\t\t}else{\r\n\t\t\t\tobj1 = prevFrame.getObject(this);\r\n\t\t\t}\r\n\t\t\tvar frame1 = obj2.frame - obj1.frame;\r\n\r\n\t\t\tobj.height = parseFloat((obj1.height+(frame - obj1.frame)*(obj2.height - obj1.height)/frame1).toFixed(2));\r\n\t\t\tobj.width = parseFloat((obj1.width+(frame - obj1.frame)*(obj2.width - obj1.width)/frame1).toFixed(2));\r\n\t\t\tobj.scaleX = parseFloat((obj1.scaleX+(frame - obj1.frame)*(obj2.scaleX - obj1.scaleX)/frame1).toFixed(2));\r\n\t\t\tobj.scaleY = parseFloat((obj1.scaleY+(frame - obj1.frame)*(obj2.scaleY - obj1.scaleY)/frame1).toFixed(2));\r\n\t\t\tobj.rotation =parseFloat((obj1.rotation+(frame - obj1.frame)*(obj2.rotation - obj1.rotation)/frame1).toFixed(2));\r\n\r\n\r\n\t\t\tobj.posX = parseFloat((obj1.posX+(frame - obj1.frame)*(obj2.posX - obj1.posX)/frame1).toFixed(2));\r\n\t\t\tobj.posY = parseFloat((obj1.posY+(frame - obj1.frame)*(obj2.posY - obj1.posY)/frame1).toFixed(2));\r\n\r\n\t\t\tobj.alpha = parseFloat((obj1.alpha+(frame - obj1.frame)*(obj2.alpha - obj1.alpha)/frame1).toFixed(2));\r\n\t\t\tobj.visible = obj1.visible;\r\n\t\t\tobj.frame = -1;\r\n\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\r\n\t}\r\n\tthis.checkFrame = function(frame,actionIndex){\r\n\r\n\t\tvar obj = this.getCheckFrameObj(frame,actionIndex);\r\n\r\n\t\tthis.updateView(obj);\r\n\t};\r\n\r\n\r\n\tthis.destroy =function(){\r\n\t\tthis.removeFromParent();\r\n\r\n\t};\r\n\t\r\n\tthis.removeFromParent = function(){\r\n\t\tif(this.view.parent){\r\n\t\t\tthis.view.parent.removeChild(this.view);\r\n\t\t}\r\n\t\tthis.layer.removeFromParent();\r\n\t};\r\n\t\r\n\tvar elmId = this.id;\r\n\tvar self = this;\r\n\r\n\tthis.moveComplete = function(){\r\n\r\n\t\tDirector.getInstance().postMsg(\"moveComplete\",self);\r\n\t};\r\n\tthis.updateMove = function(frame){\r\n\t\tvar frameSet = this.getFrameSet(frame,UIProject.getInstance().currentUI.actionIndex);\r\n\t\tif(frameSet==null){\r\n\r\n\t\t\tthis.posX =  UIProject.getInstance().currentUI.getPosXValue(this.view.x,this.PosTypeX);\r\n\t\t\tthis.posY =  UIProject.getInstance().currentUI.getPosYValue(this.view.y,this.PosTypeY);\r\n\r\n\t\t}else{\r\n\r\n\t\t\tvar posX = UIProject.getInstance().currentUI.getViewXValue(this.posX,this.PosTypeX);\r\n\t\t\tvar posY = UIProject.getInstance().currentUI.getViewYValue(this.posY,this.PosTypeY);\r\n\r\n\t\t\tframeSet.posX = this.view.x-posX;\r\n\t\t\tframeSet.posY = this.view.y-posY;\r\n\t\t}\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",self);\r\n\t}\r\n\tDragManager.getInstance().addDragObj(this.view,this.moveComplete);\r\n\r\n\tthis.textureJson=null;\r\n\tthis.textureName=null;\r\n\r\n\tthis.display=null;\r\n\t\r\n\r\n\tthis.updatePosition = function(obj){\r\n\r\n\t\tvar xx = 0;\r\n\t\tvar yy = 0;\r\n\r\n\r\n\t\tif(obj==null) {\r\n\t\t\txx = this.posX;\r\n\t\t\tyy = this.posY;\r\n\r\n\t\t\tif(UIProject.getInstance().currentUI){\r\n\t\t\t\tthis.view.x = UIProject.getInstance().currentUI.getViewXValue(xx, this.PosTypeX);\r\n\t\t\t\tthis.view.y = UIProject.getInstance().currentUI.getViewYValue(yy, this.PosTypeY);\r\n\t\t\t}else{\r\n\r\n\t\t\t\tthis.view.x = UIManager.getInstance().currentFile.getViewXValue(xx, this.PosTypeX);\r\n\t\t\t\tthis.view.y = UIManager.getInstance().currentFile.getViewYValue(yy, this.PosTypeY);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.view.x = obj.posX;\r\n\t\t\tthis.view.y = obj.posY;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t}\r\n\tthis.baseUpdateView = function(obj){\r\n\r\n\r\n\r\n\r\n\t\tif(obj==null) {\r\n\r\n\t\t\tthis.content.scale = new PIXI.Point(this.scaleX, this.scaleY);\r\n\t\t\tthis.content.rotation = Math.PI * this.rotation / 180;\r\n\t\t\tthis.updatePosition();\r\n\t\t\tthis.content.alpha = this.alpha;\r\n\t\t\tthis.content.visible = this.visible;\r\n\r\n\r\n\t\t\tthis.content.rotation = this.rotation*Math.PI/180;\r\n\r\n\t\t}else{\r\n\t\t\t//this.content.pivot=new PIXI.Point(this.anchorX*this.content.width/obj.scaleX, this.anchorY*this.content.height/obj.scaleY);\r\n\t\t\tthis.content.scale = new PIXI.Point(obj.scaleX, obj.scaleY);\r\n\t\t\tthis.content.rotation = Math.PI * obj.rotation / 180;\r\n\t\t\tthis.updatePosition(obj);\r\n\t\t\tthis.content.alpha = obj.alpha;\r\n\t\t\tthis.content.visible = obj.visible;\r\n\r\n\t\t}\r\n\r\n\t\t//this.content.anchor=new PIXI.Point(this.anchorX, this.anchorY);\r\n\r\n\t};\r\n\tthis.baseChangeElm = function(obj){\r\n\r\n\t\tif(obj.id==\"visible\"){\r\n\t\t\tvar value = document.getElementById(\"visible\").checked;\r\n\r\n\t\t\tthis.visible = value;\r\n\t\t\t//this.content.visible = this.visible;\r\n\r\n\t\t}else {\r\n\t\t\tvar oldValue = this[obj.id];\r\n\r\n\t\t\tswitch(obj.id){\r\n\r\n\t\t\t\tcase \"posX\":\r\n\t\t\t\tcase \"posY\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseInt(this[obj.id]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"instName\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"width\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis.content.width = this.width;\r\n\t\t\t\t\tthis.scaleX = this.content.scale.x;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"height\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis.content.height = this.height;\r\n\t\t\t\t\tthis.scaleY = this.content.scale.y;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"scaleX\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\r\n\t\t\t\t\tthis.content.scale=new PIXI.Point(this.scaleX, this.scaleY);\r\n\r\n\t\t\t\t\tthis.width = this.content.width;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"scaleY\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\t\t\t\t\tthis.content.scale=new PIXI.Point(this.scaleX, this.scaleY);\r\n\r\n\t\t\t\t\tthis.height = this.content.height;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"alpha\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"anchorX\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\t\t\t\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"anchorY\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\t\t\t\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"rotation\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tthis[obj.id] = parseFloat(this[obj.id]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"PosTypeX\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tvar posX = UIProject.getInstance().currentUI.getViewXValue(this.posX,oldValue);\r\n\t\t\t\t\tthis[obj.id] = parseInt(this[obj.id]);\r\n\r\n\t\t\t\t\tthis.posX = UIProject.getInstance().currentUI.getPosXValue(posX,this.PosTypeX);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"PosTypeY\":\r\n\t\t\t\t\tthis[obj.id] = obj.value;\r\n\t\t\t\t\tvar posY = UIProject.getInstance().currentUI.getViewYValue(this.posY,oldValue);\r\n\r\n\t\t\t\t\tthis[obj.id] = parseInt(this[obj.id]);\r\n\r\n\r\n\t\t\t\t\tthis.posY = UIProject.getInstance().currentUI.getPosYValue(posY,this.PosTypeY);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.updateLayer();\r\n\t};\r\n\tthis.getBasePropertiesDiv = function(){\r\n\t\r\n\t\tvar res=\"<table border='1'>\";\r\n\t\tres+=\"<tr><td style='width:50%'>id:\"+this.id+\"</td><td><button onClick=UIProject.getInstance().currentEditor.delElm(\"+this.id+\");>删除</button></td></tr>\";\r\n\t\t//res+=\"<tr><td colspan='2'>rootId:<input type='text' id='rootId' value='\"+this.rootId+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td colspan='2'>实例名:<input type='text' id='instName' value='\"+this.instName+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td>宽:<input type='text' id='width' value='\"+this.width+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td>\";\r\n\t\tres+=\"<td>高:<input type='text' id='height' value='\"+this.height+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\r\n\t\tif(this.visible==true) {\r\n\r\n\t\t\tres += \"<tr><td>显示:<input type='checkbox' id='visible'  checked onchange='UIProject.getInstance().currentEditor.changeElm(this,\" + this.id + \");'/></td>\";\r\n\t\t}else{\r\n\t\t\tres += \"<tr><td>显示:<input type='checkbox' id='visible'  onchange='UIProject.getInstance().currentEditor.changeElm(this,\" + this.id + \");'/></td>\";\r\n\t\t}\r\n\t\tres+=\"<td>alpha:<input type='text' id='alpha' value='\"+this.alpha+\"' style='width:30px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\t\tres+=\"<tr><td>X:<input type='text' id='posX' value='\"+this.posX+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td>\";\r\n\t\tres+=\"<td>Y:<input type='text' id='posY' value='\"+this.posY+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\r\n\t\tres+=\"<tr><td>位置类型<select id='PosTypeX' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/>\";\r\n\t\tfor(var key in PosTypeXList){\r\n\t\t\tif(key != this.PosTypeX) {\r\n\t\t\t\tres += \"<option value=\" + key + \">\" + PosTypeXList[key] + \"</option>\";\r\n\t\t\t}else{\r\n\t\t\t\tres += \"<option value=\" + key + \" selected>\" + PosTypeXList[key] + \"</option>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tres+=\"</td>\";\r\n\t\tres+=\"<td>位置类型<select id='PosTypeY' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/>\";\r\n\t\tfor(var key in PosTypeYList){\r\n\t\t\tif(key != this.PosTypeY) {\r\n\t\t\t\tres += \"<option value=\" + key + \">\" + PosTypeYList[key] + \"</option>\";\r\n\t\t\t}else{\r\n\t\t\t\tres += \"<option value=\" + key + \" selected>\" + PosTypeYList[key] + \"</option>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tres+=\"</td></tr>\";\r\n\r\n\r\n\t\tres+=\"<tr><td>scaleX:<input type='text' id='scaleX' value='\"+this.scaleX+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td>\";\r\n\t\tres+=\"<td>scaleY:<input type='text' id='scaleY' value='\"+this.scaleY+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\t\tres+=\"<tr><td>anchorX:<input type='text' id='anchorX' value='\"+this.anchorX+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td>\";\r\n\r\n\t\tres+=\"<td>anchorY:<input type='text' id='anchorY' value='\"+this.anchorY+\"' style='width:50px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td colspan='2'>旋转:<input type='text' id='rotation' value='\"+this.rotation+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"</table>\";\r\n\t\t\r\n\t\treturn res;\r\n\t};\r\n\tthis.getBaseJsonObj = function (){\r\n\t\tvar obj = {};\r\n\t\t\r\n\t\tobj.id = this.id;\r\n\t\tobj.type = this.type;\r\n\t\tobj.posX = this.posX;\r\n\t\tobj.posY = this.posY;\r\n\t\tobj.scaleX = this.scaleX;\r\n\t\tobj.scaleY = this.scaleY;\r\n\t\tobj.width = this.width;\r\n\t\tobj.height = this.height;\r\n\t\tobj.instName = this.instName;\r\n\t\tobj.order = this.order;\r\n\t\tobj.rootId = this.rootId;\r\n\t\tobj.anchorX = this.anchorX;\r\n\t\tobj.anchorY = this.anchorY;\r\n\t\tobj.frameSetList = [];\r\n\t\tobj.rotation = this.rotation;\r\n\t\tfor(var key in this.frameSetList){\r\n\t\t\tobj.frameSetList[key]=[];\r\n\t\t\tfor(var key1 in this.frameSetList[key]){\r\n\t\t\t\tobj.frameSetList[key].push(this.frameSetList[key][key1].getJson())\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj.PosTypeX =  this.PosTypeX;\r\n\t\tobj.PosTypeY =  this.PosTypeY;\r\n\r\n\t\treturn obj;\r\n\t};\r\n\tthis.setBaseJson =function(json){\r\n\r\n\t\tthis.posX = parseInt(json.posX);\r\n\t\tthis.posY = parseInt(json.posY);\r\n\r\n\t\tif(json.scaleX!==null){\r\n\t\t\tthis.scaleX = parseFloat(json.scaleX);\r\n\t\t}\r\n\t\tif(json.scaleY!==null){\r\n\r\n\t\t\tthis.scaleY = parseFloat(json.scaleY);\r\n\t\t}\r\n\t\tif(json.PosTypeX){\r\n\t\t\tthis.PosTypeX = parseInt(json.PosTypeX);\r\n\t\t}\r\n\r\n\t\tif(json.PosTypeY){\r\n\t\t\tthis.PosTypeY = parseInt(json.PosTypeY);\r\n\t\t}\r\n\r\n\t\tthis.width = parseInt(json.width);\r\n\t\tthis.height = parseInt(json.height);\r\n\t\tthis.instName = json.instName;\r\n\t\tif(json.order!==null){\r\n\t\t\tthis.order = parseInt(json.order);\r\n\t\t}\r\n\t\tif(json.rootId!==null){\r\n\t\t\t\r\n\t\t\tthis.rootId = json.rootId;\r\n\t\t}\r\n\r\n\t\tif(json.anchorX!==null){\r\n\t\t\tthis.anchorX = parseFloat(json.anchorX);\r\n\t\t}\r\n\t\tif(json.anchorY!==null){\r\n\r\n\t\t\tthis.anchorY = parseFloat(json.anchorY);\r\n\t\t}\r\n\r\n\t\tthis.rotation = parseInt(json.rotation);\r\n\r\n\r\n\r\n\r\n\t\tthis.frameSetList = {};\r\n\t\tfor(var key in json.frameSetList){\r\n\t\t\tthis.frameSetList[key]=[];\r\n\t\t\tfor(var key1 in json.frameSetList[key]) {\r\n\t\t\t\tvar frameObj = JSON.parse(json.frameSetList[key][key1])\r\n\t\t\t\tvar frameSet = new FrameSet(frameObj.frame);\r\n\t\t\t\tframeSet.setJson(frameObj);\r\n\t\t\t\tthis.frameSetList[key].push(frameSet);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.updatePosition();\r\n\t};\r\n\tthis.getPropertiesDiv = function(){\r\n\t\talert(\"!!\");\r\n\t};\r\n\tthis.changeElm = function(){\r\n\t\talert(\"!!\");\r\n\t};\r\n\t\r\n}","\r\nfunction PicElement(resName){\r\n\t\r\n\tBaseElement.call(this);\r\n\r\n\r\n\tthis.type = \"pic\";\r\n\tthis.instName = this.type;\r\n\tthis.content = new PIXI.Sprite();\r\n\r\n\tif(resName==undefined) {\r\n\t\tthis.resName = UIProject.getInstance().defaultResKey;\r\n\t}else{\r\n\t\tthis.resName = resName;\r\n\t}\r\n\r\n\r\n\tvar self = this;\r\n\r\n\tif(this.resName!==null) {\r\n\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\tthis.content.texture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t} else {\r\n\t\t\tthis.content.texture = UIManager.getInstance().loaderRes[this.resName].texture;\r\n\t\t}\r\n\t\tthis.width = this.content.width;\r\n\t\tthis.height = this.content.height;\r\n\t}else{\r\n\t\talert(\"请先加载res资源\");\r\n\t\tthis.errorNo = 1;\r\n\t\treturn ;\r\n\t}\r\n\r\n\tthis.updateView = function(obj){\r\n\r\n\t\tif(obj==null) {\r\n\r\n\t\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\t\tthis.content.texture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t} else {\r\n\t\t\t\tthis.content.texture = UIManager.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t}\r\n\t\t}else{\r\n\r\n\t\t\tif(obj.hasOwnProperty(\"resName\") && obj[\"resName\"]!==null){\r\n\t\t\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\t\t\tthis.content.texture = UIProject.getInstance().loaderRes[obj.resName].texture;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.content.texture = UIManager.getInstance().loaderRes[obj.resName].texture;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif (UIProject.getInstance().loaderRes) {\r\n\t\t\t\t\tthis.content.texture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.content.texture = UIManager.getInstance().loaderRes[this.resName].texture;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.baseUpdateView(obj);\r\n\t};\r\n\r\n\tthis.view.addChild(this.content);\r\n\t\r\n\tthis.getJson = function(){\r\n\t\tvar obj = this.getBaseJsonObj();\r\n\t\tobj.resName=this.resName;\r\n\t\t\r\n\t\treturn JSON.stringify(obj);\r\n\t};\r\n\tthis.setJson = function(json){\r\n\t\tthis.setBaseJson(json);\r\n\t\t\r\n\t\tthis.resName = json.resName;\r\n\r\n\t\tthis.updateView();\r\n\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\t};\r\n\t\r\n\tthis.getPropertiesHtml = function(){\r\n\t\t\r\n\t\tvar res=this.getBasePropertiesDiv();\r\n\r\n\t\t\r\n\t\tres+=\"<table border='1'>\";\r\n\t\tres+=\"<tr><td>图片:</td><td>\";\r\n\r\n\t\tres+=\"<select id='resName' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'>\";\r\n\t\tfor(var key in UIProject.getInstance().resMap){\r\n\t\t\tif(key == this.resName){\r\n\t\t\t\tres+=\"<option value='\"+key+\"' selected>\"+key+\"</option>\";\r\n\t\t\t}else{\r\n\t\t\t\tres+=\"<option value='\"+key+\"'>\"+key+\"</option>\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tres+=\"</select>\";\r\n\t\tres+=\"</td></tr>\";\r\n\t\tres+=\"</table>\";\r\n\r\n\t\tdocument.getElementById(\"elmProperty\").innerHTML = res;\r\n\r\n\t};\r\n\tthis.changeElm = function(obj){\r\n\r\n\t\tthis.baseChangeElm(obj);\r\n\t\tif(obj.id == \"resName\"){\r\n\t\t\tthis.resName = obj.value\r\n\t\t\tthis.content.texture = UIProject.getInstance().loaderRes[this.resName].texture;\r\n\t\t\tthis.content.scale.x=this.scaleX;\r\n\t\t\tthis.content.scale.y=this.scaleY;\r\n\t\t\tthis.width = this.content.width;\r\n\t\t\tthis.height = this.content.height;\r\n\t\t}\r\n\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this);\r\n\t}\r\n}","/////////////////////////////////\r\nfunction ShapeElement(){\r\n\t\r\n\tBaseElement.call(this);\r\n\tthis.color = \"FF3300\";\r\n\tthis.type=\"shape\";\r\n\tthis.width=60;\r\n\tthis.height=30;\r\n\tthis.instName = this.type;\r\n\t\r\n\tthis.content = new PIXI.Graphics();\r\n\tthis.view.addChild(this.content);\r\n\r\n\tthis.updateView = function(obj){\r\n\t\tthis.content.clear();\r\n\t\tthis.content.beginFill(parseInt(\"0x\"+this.color));\r\n\t\tthis.content.drawRect(0, 0, 60,30);\r\n\r\n\t\tthis.content.endFill();\r\n\r\n\t\tthis.baseUpdateView(obj);\r\n\t\t\r\n\t};\r\n\tthis.updateView();\r\n\r\n\tthis.getPropertiesHtml = function(){\r\n\t\t\r\n\t\tvar res=this.getBasePropertiesDiv();\r\n\t\tres+=\"<table border='1'>\";\r\n\t\t\r\n\t\tres+=\"<tr><td>颜色:</td><td><input id='color' type='text' value='\"+this.color+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\r\n\t\tres+=\"</table>\";\r\n\r\n\r\n\t\tdocument.getElementById(\"elmProperty\").innerHTML = res;\r\n\t\tvar picker = new jscolor(document.getElementById(\"color\"),{onFineChange:'UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'})\r\n\t};\r\n\tthis.changeElm = function(obj){\r\n\t\tswitch (obj.id){\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\tthis.color = obj.value;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.baseChangeElm(obj);\r\n\t\tthis.updateView();\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this);\r\n\t};\r\n\tthis.getJson = function(){\r\n\t\tvar obj = this.getBaseJsonObj();\r\n\r\n\t\tobj.color=this.color;\r\n\t\t\r\n\t\treturn JSON.stringify(obj);\r\n\t};\r\n\tthis.setJson = function(json){\r\n\t\tthis.setBaseJson(json);\r\n\t\tthis.color = json.color;\r\n\t\tthis.updateView();\r\n\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\r\n\t}\r\n}","/////////////////////////////////\r\nfunction TextElement(){\r\n\t\r\n\tBaseElement.call(this);\r\n\tthis.text = \"新文本\";\r\n\tthis.type = \"text\";\r\n\tthis.size = 24;\r\n\tthis.color = \"ff0000\";\r\n\tthis.instName = this.type;\r\n\t/*\r\n\tvar style = {\r\n    \tfont : 'bold italic '+this.size+'px Arial',\r\n\t    fill : '#F7EDCA',\r\n\t    stroke : '#4a1850',\r\n\t    strokeThickness : 5,\r\n\t    dropShadow : true,\r\n\t    dropShadowColor : '#000000',\r\n\t    dropShadowAngle : Math.PI / 6,\r\n\t    dropShadowDistance : 6,\r\n\t    wordWrap : true,\r\n\t    wordWrapWidth : 440\r\n\t};\r\n\t*/\r\n\tvar self = this;\r\n\tvar style = {\r\n\t\tfontSize:self.size,\r\n\t\tfill:\"#\"+self.color\r\n\t};\r\n\tthis.content = new PIXI.Text((this.text+\"\"),style);\r\n\tthis.width = this.content.width;\r\n\tthis.height = this.content.height;\r\n\r\n\r\n\tthis.updateView = function(obj){\r\n\r\n\r\n\t\tthis.content.text = this.text;\r\n\t\tvar style = this.content.style;\r\n\r\n\t\tstyle.fontSize = this.size;\r\n\t\tstyle.fill=\"#\"+this.color;\r\n\t\tthis.content.style=style;\r\n\r\n\t\tthis.baseUpdateView(obj);\r\n\t};\r\n\tthis.updateView();\r\n\tthis.view.addChild(this.content);\r\n\t\r\n\tthis.getJson = function(){\r\n\t\tvar obj = this.getBaseJsonObj();\r\n\t\tobj.text=this.text;\r\n\t\tobj.size = this.size;\r\n\t\tobj.color = this.color;\r\n\t\treturn JSON.stringify(obj);\r\n\t};\r\n\tthis.setJson = function(json){\r\n\t\tthis.setBaseJson(json);\r\n\t\t\r\n\t\tthis.text = json.text;\r\n\t\tif(json.color) {\r\n\t\t\tthis.color = json.color;\r\n\t\t}\r\n\t\tif(json.size){\r\n\t\t\tthis.size = json.size;\r\n\t\t}\r\n\t\tthis.updateView();\r\n\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\r\n\t};\r\n\t\r\n\tthis.getPropertiesHtml = function(){\r\n\t\t\r\n\t\tvar res=this.getBasePropertiesDiv();\r\n\t\tres+=\"<table border='1'>\";\r\n\t\tres+=\"<tr><td colspan='2'>文字:<input id='text' type='text' value='\"+this.text+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td colspan='2'>大小:<input id='size' type='text' value='\"+this.size+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"<tr><td colspan='2'>颜色:<input id='color' type='text' value='\"+this.color+\"' style='width:100px;' onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/></td></tr>\";\r\n\t\tres+=\"</table>\";\r\n\r\n\t\t//\r\n\t\tdocument.getElementById(\"elmProperty\").innerHTML = res;\r\n\t\tvar picker = new jscolor(document.getElementById(\"color\"),{onFineChange:'UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'})\r\n\t};\r\n\tthis.changeElm = function(obj){\r\n\t\tthis.baseChangeElm(obj);\r\n\r\n\t\tswitch(obj.id){\r\n\t\t\tcase \"size\":\r\n\t\t\t\tthis.size = parseInt(obj.value);\r\n\t\t\t\tvar style = this.content.style;\r\n\t\t\t\tstyle.fontSize = this.size;\r\n\t\t\t\tthis.content.style=style;\r\n\r\n\t\t\t\tthis.content.scale.x=this.scaleX;\r\n\t\t\t\tthis.content.scale.y=this.scaleY;\r\n\t\t\t\tthis.width = this.content.width;\r\n\t\t\t\tthis.height = this.content.height;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"color\":\r\n\t\t\t\tthis.color = obj.value\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"text\":\r\n\t\t\t\tthis.text = obj.value;\r\n\t\t\t\tthis.content.text = this.text;\r\n\t\t\t\tthis.content.scale.x=this.scaleX;\r\n\t\t\t\tthis.content.scale.y=this.scaleY;\r\n\t\t\t\tthis.width = this.content.width;\r\n\t\t\t\tthis.height = this.content.height;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.updateView();\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this);\r\n\t}\r\n}\r\n/////////","function UIElement(){\r\n\tBaseElement.call(this);\r\n\r\n\tif(UIProject.getInstance().fileMap!==null) {\r\n\t\tfor (var key in UIProject.getInstance().fileMap) {\r\n\t\t\tif (UIProject.getInstance().fileMap[key] == UIProject.getInstance().currentUI) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tthis.uiId = key;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tthis.type = \"ui\";\r\n\tthis.instName = this.type;\r\n\tthis.loader = new UILoader();\r\n\r\n\r\n\tthis.updateUI = function(){\r\n\r\n\r\n\t\tif(UIProject.getInstance().fileMap!==null) {\r\n\t\t\tthis.loader.loadJson(UIProject.getInstance().fileMap[this.uiId]);\r\n\t\t}else{\r\n\t\t\tthis.loader.loadJson(UIManager.getInstance().uiKeyPool[this.uiId]);\r\n\t\t}\r\n\r\n\t\tif(this.content && this.content.parent){\r\n\t\t\tthis.content.parent.removeChild(this.content);\r\n\t\t}\r\n\r\n\t\tthis.content = this.loader.content;\r\n\t\tthis.content.scale.x = this.scaleX;\r\n\t\tthis.content.scale.y = this.scaleY;\r\n\t\tthis.width = this.content.width;\r\n\t\tthis.height = this.content.height;\r\n\r\n\t\tthis.view.addChild(this.content);\r\n\r\n\t}\r\n\r\n\tthis.updateView = function(obj){\r\n\r\n\t\tthis.updateUI();\r\n\t\t//this.loader.updateView();\r\n\t\tthis.baseUpdateView(obj);\r\n\t};\r\n\r\n\r\n\r\n\tthis.getPropertiesHtml = function(){\r\n\r\n\t\tvar res=this.getBasePropertiesDiv();\r\n\t\tres+=\"<table border='1'>\";\r\n\t\t\r\n\t\tres+=\"<tr><td colspan='2'>uiId:<select id='uiId'  onchange='UIProject.getInstance().currentEditor.changeElm(this,\"+this.id+\");'/>\";\r\n\t\tfor(var key in UIProject.getInstance().fileMap){\r\n\t\t\tif (UIProject.getInstance().fileMap[key] == UIProject.getInstance().currentUI) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(key == this.uiId){\r\n\t\t\t\tres+=\"<option value='\"+key+\"' selected>\"+UIProject.getInstance().fileMap[key].fileName+\"</option>\";\r\n\t\t\t}else{\r\n\t\t\t\tres+=\"<option value='\"+key+\"'>\"+UIProject.getInstance().fileMap[key].fileName+\"</option>\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tres+=\"</td></tr>\";\r\n\t\tres+=\"</table>\";\r\n\t\tdocument.getElementById(\"elmProperty\").innerHTML = res;\r\n\t};\r\n\tthis.getJson = function(){\r\n\t\tvar obj = this.getBaseJsonObj();\r\n\t\tobj.uiId=this.uiId;\r\n\t\treturn JSON.stringify(obj);\r\n\t};\r\n\tthis.setJson = function(json){\r\n\t\tthis.setBaseJson(json);\r\n\t\tthis.uiId = json.uiId;\r\n\t\tthis.updateView();\r\n\t\tthis.content.pivot=new PIXI.Point(this.anchorX*this.content.width/this.scaleX, this.anchorY*this.content.height/this.scaleY);\r\n\t};\r\n\r\n\tthis.changeElm = function(obj) {\r\n\t\tthis.baseChangeElm(obj);\r\n\r\n\r\n\t\tif(obj.id == \"uiId\"){\r\n\t\t\tthis.uiId = obj.value;\r\n\t\t\tthis.updateUI();\r\n\t\t}\r\n\t\tDirector.getInstance().postMsg(\"elementUpdate\",this);\r\n\t}\r\n\r\n}","function FrameSet(frame){\r\n\r\n    this.frame = frame;\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.scaleX = 1;\r\n    this.scaleY = 1;\r\n    this.rotation = 0;\r\n    this.b_continue = 0;\r\n    this.posX = 0;\r\n    this.posY = 0;\r\n    this.alpha = 1;\r\n    this.visible = 1;\r\n\r\n    this.resName = null;\r\n\r\n    this.changeFrame = function(obj,elm){\r\n\r\n        var value;\r\n        switch(obj.id){\r\n            case \"f_width\":\r\n                this.width = parseInt(document.getElementById(\"f_width\").value);\r\n                elm.content.width = this.width;\r\n                this.scaleX = elm.content.scale.x;\r\n                break;\r\n            case \"f_height\":\r\n                this.height = parseInt(document.getElementById(\"f_height\").value);\r\n                elm.content.height = this.height;\r\n                this.scaleY = elm.content.scale.y;\r\n                break;\r\n            case \"f_scaleX\":\r\n                this.scaleX = parseFloat(document.getElementById(\"f_scaleX\").value);\r\n                elm.content.scale = new PIXI.Point(this.scaleX, this.scaleY);\r\n                this.width = elm.content.width;\r\n                break;\r\n            case \"f_scaleY\":\r\n                this.scaleY = parseFloat(document.getElementById(\"f_scaleY\").value);\r\n                elm.content.scale = new PIXI.Point(this.scaleX, this.scaleY);\r\n                this.height = elm.content.height;\r\n                break;\r\n            case \"f_x\":\r\n                this.posX = parseInt(document.getElementById(\"f_x\").value);\r\n                break;\r\n            case \"f_y\":\r\n                this.posY = parseInt(document.getElementById(\"f_y\").value);\r\n                break;\r\n            case \"f_alpha\":\r\n                this.alpha = parseFloat(document.getElementById(\"f_alpha\").value);\r\n                break;\r\n            case \"f_continue\":\r\n                value = document.getElementById(\"f_continue\").checked;\r\n                if(value===true) {\r\n                    this.b_continue=1;\r\n                }else{\r\n                    this.b_continue=0;\r\n                }\r\n                break;\r\n\r\n            case \"f_visible\":\r\n                value = document.getElementById(\"f_visible\").checked;\r\n                if(value===true) {\r\n                    this.visible=1;\r\n                }else{\r\n                    this.visible=0;\r\n                }\r\n                break;\r\n            case \"f_rotation\":\r\n                this.rotation = parseInt(document.getElementById(\"f_rotation\").value);\r\n                break;\r\n            case \"f_resName\":\r\n                var div = document.getElementById(\"f_resName\");\r\n                if(div){\r\n                    this.resName = div.value;\r\n                }\r\n                break;\r\n        }\r\n    };\r\n\r\n    this.getJson = function(){\r\n        var obj = this.getObject();\r\n\r\n        return JSON.stringify(obj);\r\n    };\r\n    this.getObject = function(elm){\r\n        var obj = {};\r\n        obj.frame = this.frame;\r\n        obj.width = this.width;\r\n        obj.height = this.height;\r\n        obj.scaleX = this.scaleX;\r\n        obj.scaleY = this.scaleY;\r\n        obj.rotation = this.rotation;\r\n        obj.b_continue = this.b_continue;\r\n        if(elm) {\r\n            var posX;\r\n            var posY;\r\n            if(UIProject.getInstance().currentUI){\r\n                posX = UIProject.getInstance().currentUI.getViewXValue(elm.posX,elm.PosTypeX);\r\n                posY = UIProject.getInstance().currentUI.getViewYValue(elm.posY,elm.PosTypeY);\r\n            }else{\r\n                posX = UIManager.getInstance().currentFile.getViewXValue(elm.posX,elm.PosTypeX);\r\n                posY = UIManager.getInstance().currentFile.getViewYValue(elm.posY,elm.PosTypeY);\r\n\r\n            }\r\n\r\n\r\n\r\n            obj.posX = posX + this.posX;\r\n            obj.posY = posY + this.posY;\r\n\r\n\r\n        }else{\r\n            obj.posX = this.posX;\r\n            obj.posY = this.posY;\r\n        }\r\n        obj.visible = this.visible;\r\n        obj.alpha = this.alpha;\r\n        obj.resName = this.resName;\r\n\r\n        return obj;\r\n\r\n    };\r\n\r\n    this.setJson = function(obj){\r\n        this.width = obj.width;\r\n        this.height = obj.height;\r\n        this.scaleX = obj.scaleX;\r\n        this.scaleY = obj.scaleY;\r\n        this.rotation = obj.rotation;\r\n        this.b_continue = obj.b_continue;\r\n        this.posX = obj.posX;\r\n        this.posY = obj.posY;\r\n        this.resName = obj.resName;\r\n        this.visible = obj.visible;\r\n        this.alpha = obj.alpha;\r\n    };\r\n}","function Layout(width,height){\r\n  PIXI.Graphics.call(this);\r\n\r\n  this.beginFill(0x9999ff,1);\r\n  this.drawRect(0,0,width,height-500);\r\n  this.endFill();\r\n\r\n  this.timeLine = new PIXI.Graphics();\r\n  this.timeLine.beginFill(0xffffff,1);\r\n  this.timeLine.drawRect(0,0,width-250,20);\r\n  this.timeLine.endFill();\r\n\r\n  this.cursor = new Cursor(height-500);\r\n  this.timeLine.addChild(this.cursor);\r\n\r\n  this.content = new PIXI.Container();\r\n\r\n    var self = this;\r\n  this.timeLine.x = 250;\r\n\r\n  this.addChild(this.content);\r\n  this.content.y = 20;\r\n  this.addChild(this.timeLine);\r\n  function cursorComplete(view){\r\n    var frame = Math.round((view.x-5)/10);\r\n    view.x = frame*10+5;\r\n\r\n    Director.getInstance().postMsg(\"selectFrame\",frame);\r\n  }\r\n    function cursorMove(view){\r\n        var frame = Math.round((view.x-5)/10);\r\n        Director.getInstance().postMsg(\"selectFrame\",frame);\r\n    }\r\n  function frameClick(frame){\r\n      self.cursor.x = frame*10+5;\r\n\r\n      Director.getInstance().postMsg(\"selectFrame\",frame);\r\n  }\r\n  ScrollDragManager.getInstance().addDragObj(this.content,width,height-500-50);\r\n\r\n\r\n    var dragObj;\r\n    dragObj = DragManager.getInstance().addDragObj(this.cursor, cursorComplete, width - 250, 0);\r\n    dragObj.moveCallBack = cursorMove;\r\n\r\n\r\n    this.scrollTop = function(){\r\n        this.content.y = 20;\r\n    }\r\n  this.updateView = function(arr){\r\n\r\n    for(var key in arr){\r\n      arr[key].layer.y = key*35;\r\n      arr[key].updateLayer();\r\n\r\n    }\r\n  };\r\n\r\n  Director.getInstance().addObserver(this,\"frameClick\",frameClick);\r\n}\r\nLayout.prototype = Object.create(PIXI.Graphics.prototype);\r\n\r\n\r\nfunction Cursor(height){\r\n  PIXI.Container.call(this);\r\n  this.block = new PIXI.Graphics();\r\n  this.block.beginFill(0,1);\r\n  this.block.drawRect(-5,0,10,20);\r\n  this.block.endFill();\r\n  this.x = 5;\r\n  this.line  = new PIXI.Graphics();\r\n  this.block.beginFill(0,1);\r\n  this.block.drawRect(-2,0,4,height);\r\n  this.block.endFill();\r\n\r\n  this.addChild(this.block);\r\n  this.addChild(this.line);\r\n\r\n\r\n}\r\nCursor.prototype = Object.create(PIXI.Container.prototype);\r\n\r\nfunction Layer(elmObj){\r\n  PIXI.Graphics.call(this);\r\n  this.beginFill(0x000000,1);\r\n  this.drawRect(0,0,850,35);\r\n  this.endFill();\r\n\r\n\r\n    this.setSelect = function(value){\r\n        this.clear();\r\n        if(value){\r\n            this.beginFill(0xff0000,1);\r\n        }else{\r\n            this.beginFill(0x000000,1);\r\n        }\r\n        this.drawRect(0,0,850,35);\r\n        this.endFill();\r\n    };\r\n  this.layerClick = function (){\r\n      Director.getInstance().postMsg(\"layerClick\",elmObj,1);\r\n  };\r\n\r\n  this.hiddenClick = function (){\r\n      Director.getInstance().postMsg(\"layerClick\",elmObj,2);\r\n  };\r\n\r\n  this.lockClick = function (){\r\n      Director.getInstance().postMsg(\"layerClick\",elmObj,3);\r\n  };\r\n\r\n  this.moveClick = function (){\r\n      Director.getInstance().postMsg(\"layerClick\",elmObj,4);\r\n  };\r\n    this.enterClick = function (){\r\n        Director.getInstance().postMsg(\"layerClick\",elmObj,5);\r\n    };\r\n\r\n  this.button = new SimpleButton(\"图层\",this.layerClick);\r\n  this.addChild(this.button);\r\n\r\n  this.hiddenButton = new SimpleButton(\"隐藏\",this.hiddenClick);\r\n  this.addChild(this.hiddenButton);\r\n  this.hiddenButton.x = 100;\r\n\r\n  this.lockButton = new SimpleButton(\"上锁\",this.lockClick);\r\n  this.addChild(this.lockButton);\r\n  this.lockButton.x = 150;\r\n\r\n  this.moveButton = new SimpleButton(\"下移\",this.moveClick);\r\n  this.addChild(this.moveButton);\r\n  this.moveButton.x = 200;\r\n\r\n    /*\r\n    var enterButton = new SimpleButton(\"进入\",this.enterClick);\r\n    this.addChild(enterButton);\r\n    enterButton.x = 200;\r\n    */\r\n\r\n  this.timeLine = new TimeLine();\r\n  this.addChild(this.timeLine);\r\n  this.timeLine.x = 250;\r\n  this.timeLine.y = 2;\r\n\r\n  this.setTitle = function(str){\r\n    this.button.setTitle(str);\r\n  };\r\n  this.removeFromParent = function(){\r\n    if(this.parent){\r\n      this.parent.removeChild(this);\r\n    }\r\n  };\r\n  this.updateView = function(obj){\r\n      this.button.setTitle(obj.instName);\r\n      this.timeLine.updateKeyPoint(obj);\r\n  };\r\n\r\n}\r\nLayer.prototype = Object.create(PIXI.Graphics.prototype);\r\n\r\nfunction TimeLine(){\r\n  PIXI.Container.call(this);\r\n  this.list = [];\r\n\r\n  for(var i=0;i<60;i++){\r\n    var view = new FrameView(i);\r\n      this.list.push(view);\r\n      view.x = i*10;\r\n      this.addChild(view);\r\n      this.addChild(view.keyPoint);\r\n  }\r\n\r\n    this.updateKeyPoint = function(elm){\r\n\r\n        for(var i=1;i<60;i++){\r\n            this.list[i].setKeyPoint(0);\r\n            if(i>UIProject.getInstance().currentUI.getCurrentAction().actionTime){\r\n                this.list[i].visible=false;\r\n            }else{\r\n                this.list[i].visible=true;\r\n            }\r\n        }\r\n        if(elm.frameSetList.hasOwnProperty(UIProject.getInstance().currentUI.actionIndex)) {\r\n            var list = elm.frameSetList[UIProject.getInstance().currentUI.actionIndex];\r\n            for (var key in list) {\r\n                if(list[key].b_continue){\r\n                    this.list[list[key].frame].setKeyPoint(2);\r\n                }else{\r\n                    this.list[list[key].frame].setKeyPoint(1);\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n}\r\nTimeLine.prototype = Object.create(PIXI.Container.prototype);\r\n\r\nfunction FrameView(frame){\r\n    PIXI.Container.call(this);\r\n    var back = new PIXI.Graphics();\r\n    this.addChild(back);\r\n    if(frame%2===0) {\r\n        back.beginFill(0x999999, 1);\r\n    }else{\r\n        back.beginFill(0xeeeeee, 1);\r\n    }\r\n    back.drawRect(0,0,10,30);\r\n    back.endFill();\r\n\r\n    this.keyPoint = new PIXI.Graphics();\r\n    this.keyPoint.beginFill(0x0,1);\r\n    this.keyPoint.drawCircle(0,0,5);\r\n    this.keyPoint.endFill();\r\n\r\n    this.addChild(this.keyPoint);\r\n    this.keyPoint.x = 5+frame*10;\r\n    this.keyPoint.y = 5;\r\n\r\n    this.setKeyPoint = function(value){\r\n\r\n        this.keyPoint.clear();\r\n        if(value===0){\r\n\r\n            DragManager.getInstance().removeDrag(this.keyPoint);\r\n            return ;\r\n        }\r\n        if(value==1){\r\n            this.keyPoint.beginFill(0x000000,1);\r\n        }else if(value==2){\r\n            this.keyPoint.beginFill(0xff0000,1);\r\n        }\r\n        this.keyPoint.drawCircle(0,0,5);\r\n        this.keyPoint.endFill();\r\n\r\n        DragManager.getInstance().addDragObj(this.keyPoint,keyPointDragOver);\r\n\r\n    };\r\n\r\n    function keyPointDragOver(view){\r\n        var res = view.x;\r\n        view.x = 5+frame*10;\r\n        view.y = 5;\r\n        Director.getInstance().postMsg(\"keyPointDrag\",frame,res);\r\n    }\r\n\r\n\r\n    this.interactive = true;\r\n    this.on(\"mousedown\",function(e){\r\n        e.stopPropagation();\r\n        Director.getInstance().postMsg(\"frameClick\",frame);\r\n    });\r\n\r\n}\r\nFrameView.prototype = Object.create(PIXI.Container.prototype);\r\n\r\n","\nfunction UIProject(){\n\n    EditController.getInstance();\n    \n    this.currentEditor = new Editor();\n    this.currentUI = null;\n\n    this.fileMap = null;\n    this.resMap = {};\n    this.loaderRes = null;\n    this.defaultResKey = null;\n    this.uiFileNum = 0;\n    this.maxElmNum = 0;\n    var self = this;\n\n\n    this.loadRes = function(){\n        var file=document.getElementById(\"fileRes\").files[0];\n        var reader = new FileReader();\n        reader.onload = function ( event ) {\n            var txt = event.target.result;\n            var obj = JSON.parse(txt);\n            self.resMap = obj;\n\n\n            var loader = new PIXI.loaders.Loader();\n\n            for(var key in self.resMap){\n                if(self.defaultResKey===null){\n                    self.defaultResKey = key;\n                }\n                loader.add(key, self.resMap[key],{crossOrigin: true});\n            }\n            function onAssetsLoaded(loader,res){\n                self.loaderRes = res;\n                self.updateFileList();\n            }\n\n            loader.load(onAssetsLoaded);\n        };\n        reader.readAsText(file);\n    };\n\n    this.initWithData = function(url){\n        ajax({\n            type:\"GET\",\n            url:url,\n            dataType:\"text\",\n            data:{},\n            beforeSend:function(){\n                //some js code\n            },\n            success:function(msg){\n                self.doLoad(msg);\n\n            },\n            error:function(){\n                console.log(\"error\")\n            }\n        });\n    }\n\n    this.doLoad = function(txt){\n\n        var obj = JSON.parse(txt);\n        self.resMap = obj.resMap;\n        self.fileMap = {};\n        if(obj.maxElmNum){\n            self.maxElmNum = parseInt(obj.maxElmNum);\n        }\n        if(obj.uiFileNum){\n            self.uiFileNum = parseInt(obj.uiFileNum);\n        }\n        var key ;\n        for(key in obj.fileMap){\n            self.fileMap[key] = new UIFile();\n            self.fileMap[key].loadJson(obj.fileMap[key]);\n        }\n        var loader = new PIXI.loaders.Loader();\n\n        for(key in self.resMap){\n            if(self.defaultResKey===null){\n                self.defaultResKey = key;\n            }\n            loader.add(key, self.resMap[key],{crossOrigin: true});\n        }\n        function onAssetsLoaded(loader,res){\n            self.loaderRes = res;\n            self.updateFileList();\n            for(var key in self.fileMap){\n                self.doEnterUIFile(self.fileMap[key],true);\n                break;\n            }\n        }\n\n        if(self.defaultResKey!==null) {\n            loader.load(onAssetsLoaded);\n        }else{\n            self.updateFileList();\n            for(var key in self.fileMap){\n                self.doEnterUIFile(self.fileMap[key],true);\n                break;\n            }\n        }\n\n    }\n    this.load = function(){\n        var file=document.getElementById(\"fileProject\").files[0];\n        var reader = new FileReader();\n        reader.onload = function ( event ) {\n\n            var txt = event.target.result;\n            self.doLoad(txt);\n\n        };\n        reader.readAsText(file);\n    };\n    this.save = function(){\n\n        var saveData = {};\n        saveData.resMap = this.resMap;\n        saveData.fileMap = this.fileMap;\n        saveData.maxElmNum = this.maxElmNum;\n        saveData.uiFileNum = this.uiFileNum;\n\n        var jsonStr = JSON.stringify(saveData);\n\n        var blob = new Blob([jsonStr], {type: \"text/plain;charset=utf-8\"});\n        blob = new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\n\n        var aLink = document.createElement('a');\n        aLink.target=\"_blank\";\n        aLink.href = URL.createObjectURL(blob);\n        var evt = new MouseEvent(\"click\");\n        aLink.dispatchEvent(evt);\n        URL.revokeObjectURL(aLink.href);\n        /*\n        var winname = window.open('', '_blank', 'top=10000');\n\n\n        winname.document.open('text/html', 'replace');\n        winname.document.write(jsonStr);\n        winname.document.close();\n\n        //winname.document.execCommand('saveas','','code.htm');\n        //winname.close();\n        */\n    };\n\n    this.initDiv = function(divName){\n\n        this.divObject = document.getElementById(divName);\n        this.updateFileList();\n    };\n\n    this.doNewFile = function(ui){\n        if(this.fileMap===null){\n            this.fileMap = {};\n        }\n        this.fileMap[ui.id] = ui;\n        this.doEnterUIFile(ui);\n        this.updateFileList();\n    };\n    this.newFile = function(){\n\n        var ui = new UIFile();\n        this.doNewFile(ui);\n        EditController.getInstance().addAction({action:\"newFile\",data:ui});\n\n    };\n\n    this.doEnterUIFile = function(ui,update){\n        this.updateFileProperty(ui);\n        this.currentUI = ui;\n        this.currentEditor.setJsonMap(ui,update);\n        this.currentEditor.pixiLayout.scrollTop();\n        this.updateFileList();\n    };\n\n    this.enterUIFile = function(id){\n        var ui = this.fileMap[id];\n        this.doEnterUIFile(ui,true);\n    };\n    this.doDelUIFile = function(ui){\n\n        ui.destroy();\n        this.updateFileProperty(null);\n        this.fileMap[ui.id]=null;\n        this.currentEditor.clear();\n\n        delete this.fileMap[ui.id];\n        this.currentUI=null;\n        this.updateFileList();\n    };\n    this.delUIFile = function(id){\n        var ui = this.fileMap[id];\n        this.doDelUIFile(ui);\n        EditController.getInstance().addAction({action:\"delFile\",data:ui});\n    };\n    this.changeFile = function(obj){\n        var ui = this.currentUI;\n        var oldData = JSON.stringify(ui);\n        ui.getChange(obj);\n        var newData = JSON.stringify(ui);\n        this.updateFileList();\n        this.updateFileProperty(ui);\n\n        EditController.getInstance().addAction({action:\"changeFile\",oldData:oldData,newData:newData});\n    };\n    this.updateFileList = function(){\n        var res = \"<div><button onclick='UIProject.getInstance().newFile();'>新增</button></div>\";\n        res+=\"<table>\";\n        for(var key in this.fileMap){\n            res+=\"<tr>\";\n            res+=\"<td><a href='javascript:UIProject.getInstance().enterUIFile(\"+this.fileMap[key].id+\");'>\"+this.fileMap[key].fileName+\"</a></td>\";\n            if(this.currentUI == this.fileMap[key]) {\n                res += \"<td><a href='javascript:UIProject.getInstance().delUIFile(\" + this.fileMap[key].id + \");'>删除</a></td>\";\n            }else{\n                res+=\"<td></td>\";\n            }\n            res+=\"</tr>\";\n        }\n        res+=\"</table>\";\n        this.divObject.innerHTML = res;\n    };\n    this.updateFileProperty = function(uiFile){\n        var res = \"\";\n        if(uiFile!==null) {\n\n            res+=uiFile.getHtml();\n        }\n        document.getElementById(\"elmProperty\").innerHTML = \"\";\n        document.getElementById(\"frameProperty\").innerHTML = \"\";\n        document.getElementById(\"fileProperty\").innerHTML = res;\n\n        if(document.getElementById(\"backcolor\")) {\n            new jscolor(document.getElementById(\"backcolor\"));\n        }\n\n    };\n    this.addNewAction = function(){\n        var name = document.getElementById(\"newAction\").value;\n        var time = document.getElementById(\"newTime\").value;\n        var uiAction = new UIAction();\n        uiAction.actionName = name;\n        uiAction.actionTime = parseInt(time);\n\n        this.currentUI.actionList.push(uiAction);\n        this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n\n        EditController.getInstance().addAction({elmId:UIProject.getInstance().currentEditor.currentElm.id,action:\"newAction\",data:uiAction,ui:this.currentUI.id});\n    };\n    this.deleteAction = function(key){\n\n\n\n        EditController.getInstance().addAction({elmId:UIProject.getInstance().currentEditor.currentElm.id,actionIndex:key,action:\"delAction\",data:this.currentUI.actionList[key],ui:this.currentUI.id});\n\n        this.currentUI.actionList.splice(key,1);\n        this.currentEditor.removeAction(key);\n\n        this.currentUI.actionIndex = 0;\n        this.currentEditor.updateLayout();\n        this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n\n    };\n    this.changeAction = function(id) {\n        var value = document.getElementById(\"action\" + id).value;\n        var time = document.getElementById(\"time\" + id).value;\n        var interval = document.getElementById(\"interval\" + id).value;\n        var oldData = JSON.stringify(this.currentUI.actionList[id]);\n\n        this.currentUI.actionList[id].actionName = value;\n        this.currentUI.actionList[id].actionTime = time;\n        this.currentUI.actionList[id].interval = interval;\n\n        var newData = JSON.stringify(this.currentUI.actionList[id]);\n\n        EditController.getInstance().addAction({actionIndex:this.currentUI.actionIndex,elmId:UIProject.getInstance().currentEditor.currentElm.id,action:\"changeAction\",oldData:oldData,newData:newData,ui:this.currentUI.id});\n\n        this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n        this.currentEditor.updateLayout();\n    };\n    this.selectAction = function(id){\n        this.currentUI.actionIndex = id;\n        this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n        this.currentEditor.updateLayout();\n    };\n\n    this.paste = function(event){\n        if(this.currentUI===null){\n            return ;\n        }\n        var clipboardData = event.clipboardData || window.clipboardData;\n        var pasteData = event.clipboardData.getData(\"text/plain\");\n\n        this.currentEditor.addPaste(pasteData);\n    };\n    this.copy = function(event){\n        if(this.currentUI===null){\n            return ;\n        }\n        if(this.currentEditor.currentElm===null){\n            return ;\n        }\n        var clipboardData = event.clipboardData || window.clipboardData;\n        clipboardData.setData(\"text/plain\",this.currentEditor.currentElm.getJson());\n    };\n    this.cut = function(event){\n        if(this.currentUI===null){\n            return ;\n        }\n        if(this.currentEditor.currentElm===null){\n            return ;\n        }\n        var clipboardData = event.clipboardData || window.clipboardData;\n        clipboardData.setData(\"text/plain\",this.currentEditor.currentElm.getJson());\n\n        this.currentEditor.delElm(this.currentEditor.currentElm.id);\n    };\n    this.undo = function(json){\n        var ui;\n        var obj;\n        var elm;\n        switch(json.action){\n            case \"newFile\":\n                ui = json.data;\n                this.doDelUIFile(ui);\n\n                break;\n            case \"delFile\":\n                ui = json.data;\n                this.doNewFile(ui);\n                break;\n                \n            case \"changeFile\":\n                obj = JSON.parse(json.oldData);\n                ui = this.fileMap[obj.id];\n                if(UIProject.getInstance().currentUI===null || obj.id!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollNext();\n                }else{\n                    ui.loadJson(obj);\n                }\n                this.doEnterUIFile(ui,false);\n\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n                }\n\n\n                break;\n            case \"newAction\":\n\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollNext();\n                }else{\n                    this.currentUI.actionList.pop();\n                    this.currentUI.actionIndex = 0;\n                    this.currentEditor.updateLayout();\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n\n                break;\n            case \"delAction\":\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollNext();\n                }else{\n                    this.currentUI.actionList.splice(json.actionIndex,0,json.data);\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n\n                break;\n            case \"changeAction\":\n                obj = JSON.parse(json.oldData);\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollNext();\n                }else{\n                    var actionIndex = json.actionIndex ;\n                    this.currentUI.actionList[actionIndex].actionName = obj.actionName;\n                    this.currentUI.actionList[actionIndex].interval = obj.interval;\n                    this.currentUI.actionList[actionIndex].actionTime = obj.actionTime;\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n                break;\n        }\n    };\n    this.redo = function(json){\n        var ui;\n        var obj;\n        var elm;\n        switch(json.action){\n            case \"newFile\":\n                ui = json.data;\n                this.doNewFile(ui);\n                break;\n            case \"delFile\":\n                ui = json.data;\n                this.doDelUIFile(ui);\n                break;\n            case \"changeFile\":\n                obj = JSON.parse(json.newData);\n                ui = this.fileMap[obj.id];\n                if(UIProject.getInstance().currentUI===null || obj.id!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollBack();\n                }else{\n                    ui.loadJson(obj);\n                }\n\n                this.doEnterUIFile(ui,false);\n\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n                }\n\n                break;\n            case \"newAction\":\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollBack();\n\n                }else{\n                    UIProject.getInstance().currentUI.actionList.push(json.data);\n\n                    this.currentEditor.updateLayout();\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n\n\n                break;\n            case \"delAction\":\n\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollBack();\n\n                }else{\n                    UIProject.getInstance().currentUI.actionList.splice(json.actionIndex,1);\n                    this.currentEditor.updateLayout();\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n\n                break;\n            case \"changeAction\":\n                obj = JSON.parse(json.newData);\n                if(UIProject.getInstance().currentUI===null || json.ui!=UIProject.getInstance().currentUI.id){\n                    EditController.getInstance().rollBack();\n                }else{\n                    var actionIndex = json.actionIndex ;\n                    this.currentUI.actionList[actionIndex].actionName = obj.actionName;\n                    this.currentUI.actionList[actionIndex].interval = obj.interval;\n                    this.currentUI.actionList[actionIndex].actionTime = obj.actionTime;\n                }\n                this.doEnterUIFile(this.fileMap[json.ui],false);\n                if(json.elmId){\n                    elm = UIProject.getInstance().currentEditor.getElmById(json.elmId);\n                    UIProject.getInstance().currentEditor.doElementUpdate(elm);\n\n                    this.currentEditor.updateFrameSetProperty(this.currentEditor.currentElm);\n                }\n                break;\n        }\n\n    };\n    Director.getInstance().addObserver(this,\"fileSave\",this.save);\n    Director.getInstance().addObserver(this,\"filePaste\",this.paste);\n    Director.getInstance().addObserver(this,\"fileCopy\",this.copy);\n    Director.getInstance().addObserver(this,\"fileCut\",this.cut);\n\n    Director.getInstance().addObserver(this,\"fileUndo\",this.undo);\n    Director.getInstance().addObserver(this,\"fileRedo\",this.redo);\n}\n\nUIProject.instance = null;\n\nUIProject.getInstance = function(){\n    if(UIProject.instance === null){\n        UIProject.instance = new UIProject();\n    }\n    return UIProject.instance;\n};\n\nfunction UIData(){\n    this.id = 0;\n    this.elmJsonMap = {};\n    this.actionList = [new UIAction()];\n    this.actionIndex = 0;\n    this.bindClassName = \"\";\n\n\n    this.autoResize = 0;\n    this.width = 600;\n    this.height = 400;\n    this.backcolor = \"FFFFFF\";\n\n    this.getViewXValue = function(value,type){\n        var res = value;\n        switch (type){\n            case PosTypeX_Right:\n                res = this.width - value;\n                break;\n\n            case PosType_Percentage:\n                if(value>100){\n                    value = 100;\n                }\n                if(value<0){\n                    value=0;\n                }\n                res = this.width*value/100;\n                break;\n        }\n\n        return res;\n    };\n\n    this.getViewYValue = function(value,type){\n        var res = value;\n        switch (type){\n            case PosTypeY_Bottom:\n                res = this.height - value;\n                break;\n\n            case PosType_Percentage:\n                if(value>100){\n                    value = 100;\n                }\n                if(value<0){\n                    value=0;\n                }\n                res = this.height*value/100;\n                break;\n        }\n\n        return res;\n    };\n\n    this.getPosXValue = function(value,type){\n        var res = value;\n        switch (type){\n            case PosTypeX_Right:\n                res = this.width - value;\n                break;\n\n            case PosType_Percentage:\n                if(value>this.width){\n                    value = this.width;\n                }\n                if(value<0){\n                    value=0;\n                }\n                res = Math.round(100*value/this.width);\n                break;\n        }\n\n        return res;\n    };\n\n    this.getPosYValue = function(value,type){\n        var res = value;\n        switch (type){\n            case PosTypeY_Bottom:\n                res = this.height - value;\n                break;\n            case PosType_Percentage:\n                if(value>this.height){\n                    value = this.height;\n                }\n                if(value<0){\n                    value=0;\n                }\n                res = Math.round(100*value/this.height);\n                break;\n        }\n        return res;\n    };\n\n    this.loadJson = function(obj){\n        this.id = obj.id;\n        this.elmJsonMap = obj.elmJsonMap;\n        this.actionList = obj.actionList;\n        this.actionIndex = obj.actionIndex;\n        this.bindClassName = obj.bindClassName;\n        this.fileName = obj.fileName;\n        if(obj.width || obj.height || obj.backcolor){\n            if(obj.width) {\n                this.width = obj.width;\n            }\n            if(obj.height) {\n                this.height = obj.height;\n            }\n            if(obj.backcolor){\n                this.backcolor = obj.backcolor;\n            }\n        }\n        if(obj.autoResize){\n            this.autoResize = obj.autoResize;\n        }\n    };\n}\n\nfunction UIFile(){\n    UIData.call(this);\n    UIProject.getInstance().uiFileNum++;\n    this.id = UIProject.getInstance().uiFileNum;\n    this.fileName = \"uiFile\"+this.id;\n\n    this.getCurrentAction = function(){\n        return this.actionList[this.actionIndex];\n    }\n    this.getHtml = function(){\n        var res = \"<table>\";\n        res += \"<tr><td>uiId:</td><td>\"+this.id+\"</td></tr>\";\n        res += \"<tr><td>名称:</td><td><input type='text' id='fileName' value='\"+this.fileName+\"' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n        res += \"<tr><td>class:</td><td><input type='text' id='bindClassName' value='\"+this.bindClassName+\"' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n\n        if(this.autoResize===false){\n\n            res += \"<tr><td>自适应:</td><td><input type='checkbox' id='autoResize' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n\n            res += \"<tr><td>宽:</td><td><input type='text' id='width' value='\"+this.width+\"' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n            res += \"<tr><td>高:</td><td><input type='text' id='height' value='\"+this.height+\"' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n\n\n        }else{\n            res += \"<tr><td>自适应:</td><td><input type='checkbox' id='autoResize' checked onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n        }\n\n\n\n        res += \"<tr><td>颜色:</td><td><input type='text' id='backcolor' value='\"+this.backcolor+\"' onchange='UIProject.getInstance().changeFile(this);'/></td></tr>\";\n\n        res += \"</table>\";\n\n        return res;\n    };\n\n    this.getChange = function(divObj){\n\n        if(divObj.id==\"autoResize\") {\n            this[divObj.id]=document.getElementById(\"autoResize\").checked;\n\n        }else{\n            this[divObj.id] = divObj.value;\n\n            if(divObj.id==\"width\" || divObj.id==\"height\" || divObj.id==\"backcolor\"){\n                Director.getInstance().postMsg(\"updateSceneSize\");\n            }\n        }\n\n    };\n    this.destroy = function(){\n        UIProject.getInstance().currentEditor.removeAll();\n    };\n}\nfunction UIAction(){\n    this.actionName = \"default\";\n    this.actionTime = 65;\n    this.interval = 1;\n}\n\n","\r\nfunction ScrollDragManager(){\r\n  this.maxID = 1;\r\n  this.dragPool= [];\r\n  \r\n\r\n  this.enabled = true;\r\n\r\n  this.checkDragObj = function(target){\r\n    for(var key in this.dragPool){\r\n      if(this.dragPool[key].target == target){\r\n        return this.dragPool[key];\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n  this.addDragObj = function(target,dragWidth,dragHeight){\r\n\r\n    \r\n    var dragObj = this.checkDragObj(target);\r\n    \r\n    \r\n    if(dragObj===null){\r\n      dragObj = new DragObject();\r\n      dragObj.id = this.maxID;\r\n      dragObj.target = target;\r\n      dragObj.dragWidth = dragWidth;\r\n      dragObj.dragHeight = dragHeight;\r\n\r\n      dragObj.sourceX = target.x;\r\n      dragObj.sourceY = target.y;\r\n      this.dragPool.push(dragObj);\r\n      this.maxID++;\r\n  \r\n      this.packageEvent(dragObj);\r\n    }else{\r\n      dragObj.sourceX = target.x;\r\n      dragObj.sourceY = target.y;\r\n    }\r\n    if(dragObj.dragMask===null) {\r\n      dragObj.dragMask = new PIXI.Graphics();\r\n      dragObj.dragMask.beginFill(0xff0000, 1);\r\n      dragObj.dragMask.drawRect(0, 0, dragWidth, dragHeight);\r\n      dragObj.dragMask.endFill();\r\n      dragObj.target.parent.addChild(dragObj.dragMask);\r\n      dragObj.target.mask = dragObj.dragMask;\r\n\r\n    }else{\r\n      dragObj.dragMask.clear();\r\n      dragObj.dragMask.drawRect(0, 0, dragWidth, dragHeight);\r\n      dragObj.dragMask.endFill();\r\n    }\r\n    dragObj.dragMask.x = target.x;\r\n    dragObj.dragMask.y = target.y;\r\n    \r\n  };\r\n  this.removeDrag = function(target){\r\n      var dragObj = null;\r\n      for(var key in this.dragPool){\r\n        if(this.dragPool[key].target==target){\r\n          dragObj = this.dragPool[key];\r\n          if(dragObj.dragMask && dragObj.dragMask.parent){\r\n            dragObj.dragMask.parent.removeChild(dragObj.dragMask);\r\n          }\r\n          dragObj.dragMask = null;\r\n          this.dragPool.splice(key,1);\r\n          this.removeEvent(dragObj);\r\n          break;\r\n        }\r\n      }\r\n  };\r\n  this.removeEvent = function(dragObj){\r\n    dragObj.target.interactive = false;\r\n    dragObj.target.buttonMode = false;\r\n    dragObj.target.removeListener('mouseup');\r\n    dragObj.target.removeListener('mousedown');\r\n  };\r\n  var zindex = -1;\r\n  this.packageEvent = function(dragObj){\r\n    var self = dragObj;\r\n\r\n    dragObj.target.interactive = true;\r\n    dragObj.target.buttonMode = true;\r\n\r\n\r\n\r\n\r\n    dragObj.target.on('mousedown',function onMouseDown(event){\r\n      event.stopPropagation();\r\n\r\n    \r\n      if(self.enabled===false){\r\n        return ;\r\n      }\r\n      //zindex = self.target.parent.getChildIndex(self.target);\r\n      //self.target.parent.addChild(self.target);\r\n      var pt = event.data.getLocalPosition(self.target.parent);\r\n\t\t\t//self.target.alpha=0.8;\r\n   \t\tself.posX = self.target.x;\r\n\t   \tself.posY = self.target.y;\r\n   \t\tself.eventData = event.data;\r\n\r\n   \t\tself.mouseX = pt.x;\r\n\t   \tself.mouseY = pt.y;\r\n      self.scrollSpdx=0;\r\n      self.scrollSpdy=0;\r\n\r\n      self.downTime = new Date().getTime();\r\n      self.maxWidth = self.target.width - self.dragWidth;\r\n      self.maxHeight = self.target.height - self.dragHeight;\r\n\r\n\r\n      self.target.on('mousemove',onMove);\r\n\r\n    });\r\n\r\n    dragObj.target.on('mouseup',function onMouseUp(event){\r\n        event.stopPropagation();\r\n\r\n        self.eventData = null;\r\n        self.target.removeListener('mousemove',onMove);\r\n        //self.target.parent.addChildAt(self.target,zindex);\r\n        var pt = event.data.getLocalPosition(this.parent);\r\n        \r\n        var dx = self.mouseX-pt.x;\r\n        var dy = self.mouseY-pt.y;\r\n\r\n        var time = (new Date().getTime()-self.downTime)/20;\r\n        if(time<100){\r\n        //console.log(dx,dy,time);\r\n\r\n          self.scrollSpdx=dx/time;\r\n          self.scrollSpdy=dy/time;\r\n          scrollAnimate();\r\n        }\r\n    });\r\n    \r\n    dragObj.target.on('mouseout',function onMouseUp(event){\r\n        event.stopPropagation();\r\n        self.target.alpha = 1;\r\n        self.eventData = null;\r\n        self.target.removeListener('mousemove',onMove);\r\n        //self.target.parent.addChildAt(self.target,zindex);\r\n      }\r\n    );\r\n\r\n    function onMove(event){\r\n      event.stopPropagation();\r\n      \r\n\r\n      var pt = event.data.getLocalPosition(this.parent);\r\n      if(self.eventData){\r\n        self.target.x = self.posX+pt.x - self.mouseX;\r\n        self.target.y = self.posY+pt.y - self.mouseY;\r\n\r\n        \r\n\r\n        if(self.target.y<dragObj.sourceY-self.maxHeight){\r\n          self.target.y=dragObj.sourceY-self.maxHeight;\r\n        }\r\n        if(self.target.y>dragObj.sourceY){\r\n          self.target.y=dragObj.sourceY;\r\n        }\r\n\r\n        if(self.target.x<dragObj.sourceX-self.maxWidth){\r\n          self.target.x=dragObj.sourceX-self.maxWidth;\r\n        }\r\n        if(self.target.x>dragObj.sourceX){\r\n          self.target.x=dragObj.sourceX;\r\n        }\r\n      }\r\n    }\r\n\r\n    function scrollAnimate(){\r\n\r\n      self.target.y-=self.scrollSpdy;\r\n      if(self.scrollSpdy>0){\r\n        self.scrollSpdy-=0.1;\r\n      }else{\r\n        self.scrollSpdy+=0.1;\r\n      }\r\n\r\n      self.target.x-=self.scrollSpdx;\r\n      if(self.scrollSpdx>0){\r\n        self.scrollSpdx-=0.1;\r\n      }else{\r\n        self.scrollSpdx+=0.1;\r\n      }\r\n      \r\n      var isOver = false;\r\n      if(self.target.y<dragObj.sourceY-self.maxHeight){\r\n        self.target.y=dragObj.sourceY-self.maxHeight;\r\n        isOver = true;\r\n      }\r\n      if(self.target.y>dragObj.sourceY){\r\n         self.target.y=dragObj.sourceY;\r\n         isOver = true;\r\n      }\r\n\r\n      if(self.target.x<dragObj.sourceX-self.maxWidth){\r\n        self.target.x=dragObj.sourceX-self.maxWidth;\r\n        isOver = true;\r\n      }\r\n      if(self.target.x>dragObj.sourceX){\r\n        self.target.x=dragObj.sourceX;\r\n        \r\n        isOver = true;\r\n      }\r\n      if((Math.abs(self.scrollSpdx)+Math.abs(self.scrollSpdy))<1){\r\n        isOver = true;\r\n      }\r\n      if(isOver === false){\r\n        requestAnimationFrame(scrollAnimate);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nScrollDragManager.instance = null;\r\n\r\nScrollDragManager.getInstance = function(){\r\n  if(ScrollDragManager.instance===null){\r\n    ScrollDragManager.instance = new ScrollDragManager();\r\n  }\r\n  return ScrollDragManager.instance;\r\n};","function  SelectDragManager(){\r\n  this.maxID = 1;\r\n  \r\n  this.enabled = true;\r\n\r\n  this.addDragObj = function(event,target,cb){\r\n    var dragObj = new DragObject();\r\n    dragObj.id = this.maxID;\r\n    dragObj.target = target;\r\n    dragObj.callBack = cb;\r\n    \r\n    this.maxID++;\r\n  \r\n    this.packageEvent(dragObj,event);\r\n  };\r\n  this.removeEvent = function(dragObj){\r\n    dragObj.target.interactive = false;\r\n    dragObj.target.buttonMode = false;\r\n    dragObj.target.removeListener('mouseup');\r\n  };\r\n\r\n  this.packageEvent = function(dragObj,event){\r\n    var self = dragObj;\r\n\r\n    dragObj.target.interactive = true;\r\n    dragObj.target.buttonMode = true;\r\n    \r\n\t\t\r\n\t\tdragObj.target.alpha=0.8;\r\n   \tdragObj.posX = dragObj.target.x;\r\n\t  dragObj.posY = dragObj.target.y;\r\n   \tdragObj.eventData = event.data;\r\n    var pt = event.data.getLocalPosition(self.target.parent);\r\n   \tdragObj.mouseX = pt.x;\r\n\t  dragObj.mouseY = pt.y;\r\n     \r\n\r\n\t\tdragObj.target.on('mousemove',onMove);\r\n\r\n\r\n    dragObj.target.on('mouseup',function onMouseUp(event){\r\n        self.target.alpha = 1;\r\n        self.eventData = null;\r\n        self.target.removeListener('mousemove',onMove);\r\n        SelectDragManager.getInstance().removeEvent(self);\r\n        self.dragComplete();\r\n        dragObj = null;\r\n    });\r\n    \r\n    function onMove(event){\r\n\t\t\tvar pt = event.data.getLocalPosition(this.parent);\r\n\r\n\t\t\tif(self.eventData){\r\n\t\t\t\tself.target.x = self.posX+pt.x - self.mouseX;\r\n\t\t\t\tself.target.y = self.posY+pt.y - self.mouseY;\r\n      }\r\n\r\n    }\r\n  };\r\n}\r\nSelectDragManager.instance = null;\r\n\r\nSelectDragManager.getInstance = function(){\r\n  if(SelectDragManager.instance===null){\r\n    SelectDragManager.instance = new SelectDragManager();\r\n  }\r\n  return SelectDragManager.instance;\r\n};","function SimpleButton(title,func){\r\n  PIXI.Graphics.call(this);\r\n  \r\n  var style = {\r\n    font:\"bold 12pt Arial\",\r\n    fill:'#fff',\r\n    align:'center'\r\n  };\r\n\r\n  this.txtTitle = new PIXI.Text(title,style);\r\n  this.txtTitle.x = 10;\r\n  this.txtTitle.y = 10;\r\n  this.addChild(this.txtTitle);\r\n\r\n  this.setTitle = function(title){\r\n    this.txtTitle.text = title;\r\n    this.updateView();\r\n  };\r\n\r\n  this.updateView = function(){\r\n    //this.beginFill(0x000000,1);\r\n    //this.drawRect(0,0,this.txtTitle.width+20,35);\r\n    //this.endFill();\r\n  };\r\n  this.updateView();\r\n\r\n  if(func) {\r\n    this.interactive = true;\r\n    this.buttonMode = true;\r\n    this.on(\"click\", func);\r\n  }\r\n}\r\nSimpleButton.prototype = Object.create(PIXI.Graphics.prototype);\r\n\r\n","function UILoader(){\n\n\tthis.elmObj = {};\n\tthis.elmPool = {};\n\n\tthis.clsPool = {};\n\n\tthis.content = new PIXI.Container();\n\n\tthis.animate = {};\n\tthis.uiFile = null;\n\n\tvar self = this;\n\n\n\tthis.loadJson = function(uiFile){\n\t\t\n\t\twhile(self.content.children.length>0){\n\t\t\tself.content.removeChildAt(0);\n\t\t}\n\n\t\tthis.uiFile = uiFile;\n\n\t\tvar jsonObj = uiFile.elmJsonMap;\n\t\tvar waitPool = {};\n\n\t\tvar arr = [];\n\t\tvar key ;\n\t\tfor(key in jsonObj){\n\t\t\tarr.push(JSON.parse(jsonObj[key]));\n\t\t}\n\t\tarr.sort(function (a, b) {\n\t\t\treturn a.order- b.order;\n\t\t});\n\n\t\tvar len = arr.length;\n\t\tvar hasAnimateObject = {};\n\t\t\n\t\tfor(key in uiFile.actionList){\n\t\t\thasAnimateObject[key]=false;\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar elm = elmFactory(arr[i]);\n\t\t\tself.elmObj[elm.instName]= elm;\n\t\t\tself.elmPool[elm.id] = elm;\n\n\n\n\t\t\tif(elm.type==\"ui\"){\n\t\t\t\tif(UIManager.getInstance().uiKeyPool[elm.uiId].bindClassName!==\"\") {\n\t\t\t\t\tself.clsPool[elm.instName] = eval(\"new \" + UIManager.getInstance().uiKeyPool[elm.uiId].bindClassName + \"(elm.loader)\");\n\t\t\t\t}\n\t\t\t\tvar uiAnimate = elm.loader.getAnimate(\"default\");\n\t\t\t\tif(uiAnimate!==null){\n\t\t\t\t\tuiAnimate.play(-1);\n\t\t\t\t}\n\t\t\t\tuiAnimate = elm.loader.getAnimate(\"default_once\");\n\t\t\t\tif(uiAnimate!==null){\n\t\t\t\t\tuiAnimate.play(1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telm.content.x  = elm.view.x;\n\t\t\telm.content.y = elm.view.y;\n\n\n\t\t\tfor(key in uiFile.actionList){\n\n\t\t\t\tif(elm.frameSetList.hasOwnProperty(key) && elm.frameSetList[key].length>0 && hasAnimateObject[key]===false){\n\t\t\t\t\thasAnimateObject[key] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(elm.rootId===0){\n\t\t\t\tself.content.addChild(elm.content);\n\t\t\t}else{\n\t\t\t\tif(self.elmPool[elm.rootId]==null){\n\t\t\t\t\tif(waitPool[elm.rootId]==null){\n\t\t\t\t\t\twaitPool[elm.rootId] = [];\n\t\t\t\t\t}\n\t\t\t\t\twaitPool[elm.rootId] .push(elm);\n\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t\tself.elmPool[elm.rootId].content.addChild(elm.content);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(waitPool[elm.id]){\n\t\t\t\tvar len1 = waitPool[elm.id].length;\n\t\t\t\tfor(var j=0;j<len1;j++){\n\t\t\t\t\t\n\t\t\t\t\tself.elmPool[elm.id].content.addChild(waitPool[elm.id][j].content);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(key in hasAnimateObject){\n\t\t\tif(hasAnimateObject[key]===true) {\n\t\t\t\tvar uiAnimate1 = new UIAnimate(uiFile,key,self.content);\n\t\t\t\tthis.animate[uiFile.actionList[key].actionName] = uiAnimate1;\n\t\t\t\tfor(var key1 in self.elmObj){\n\t\t\t\t\tvar obj = uiAnimate1.addElmObj(self.elmObj[key1]);\n\t\t\t\t\tfor(var ii=0;ii<uiAnimate1.maxFrame;ii++){\n\t\t\t\t\t\tvar animateObj = self.elmObj[key1].getCheckFrameObj(ii,key);\n\n\t\t\t\t\t\tobj.frameList.push(animateObj);\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn self.content;\n\t};\n\tthis.getAnimate = function(name){\n\t\tif(this.animate.hasOwnProperty(name)){\n\t\t\treturn this.animate[name];\n\t\t}\n\t\treturn null;\n\t};\n\tthis.getElmByName = function (elmName){\n\t\t\n\t\t\n\n\t\tvar obj = null;\n\t\tif(this.elmObj[elmName].type == \"ui\"){\n\t\t\tif(this.clsPool.hasOwnProperty(elmName)){\n\t\t\t\treturn this.clsPool[elmName];\n\t\t\t}else{\n\t\t\t\tobj = this.elmObj[elmName].content;\n\t\t\t}\n\t\t}else{\n\t\t\tobj = this.elmObj[elmName].content;\n\t\t}\n\t\treturn obj;\n\t};\n\tthis.getBtnByName = function (elmName){\n\t\t\n\t\tvar obj = this.elmObj[elmName].content;\n\t\tobj.interactive=true;\n\t\tobj.buttonMode=true;\n\t\treturn obj;\n\t};\n}\n\n\n\nvar UIAnimate_State_Stop = 0;\nvar UIAnimate_State_Runing = 1;\n\nfunction UIAnimate(ui,key,view){\n\tthis.state = UIAnimate_State_Stop;\n\tvar self = this;\n\tvar frame = 0;\n\tthis.intervalFrame = 0;\n\tthis.maxFrame = ui.actionList[key].actionTime;\n\n\tthis.completeFun = null;\n\tthis.userData = null;\n\n\tthis.autoRemove = false;\n\tthis.elmList = [];\n\n\tthis.defaultInterval = parseInt(ui.actionList[key].interval);\n\tthis.interval = 0;\n\tthis.loopNum = 0;\n\tthis.maxLoopNum = 0;\n\n\tthis.addElmObj = function(elm){\n\t\tvar obj = {};\n\t\tobj.elm = elm;\n\t\tobj.frameList = [];\n\t\tthis.elmList.push(obj);\n\t\treturn obj;\n\t};\n\tthis.setFrameSet = function(frame){\n\t\tthis.state = UIAnimate_State_Stop;\n\t\tfor(var key in self.elmList){\n\t\t\tvar frameSet = self.elmList[key].frameList[frame];\n\t\t\tif(frameSet===null){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tself.elmList[key].elm.updateView(frameSet);\n\t\t\tself.elmList[key].elm.content.x = self.elmList[key].elm.view.x;\n\t\t\tself.elmList[key].elm.content.y = self.elmList[key].elm.view.y;\n\t\t}\n\t};\n\tthis.stop = function(){\n\n\t\tthis.setFrameSet(0);\n\t};\n\tthis.play = function(loop,interval){\n\t\tif(this.state == UIAnimate_State_Runing){\n\t\t\treturn ;\n\t\t}\n\t\tthis.state = UIAnimate_State_Runing;\n\t\tthis.maxLoopNum = loop;\n\t\tthis.loopNum=1;\n\t\tframe = 0;\n\t\tif(interval===undefined || interval===0){\n\t\t\tthis.interval = this.defaultInterval;\n\t\t}else{\n\t\t\tthis.interval = interval;\n\t\t}\n\t\tself.intervalFrame=0;\n\t\tself.doRun();\n\t\tthis.run();\n\t};\n\tthis.doRun = function(){\n\t\tif(self.state == UIAnimate_State_Stop){\n\t\t\treturn ;\n\t\t}\n\t\tif(frame<self.maxFrame) {\n\t\t\trequestAnimationFrame(self.run);\n\n\t\t\tfor(var key in self.elmList){\n\t\t\t\tvar frameSet = self.elmList[key].frameList[frame];\n\n\t\t\t\tif(frameSet===null){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tself.elmList[key].elm.updateView(frameSet);\n\n\t\t\t\tself.elmList[key].elm.content.x = self.elmList[key].elm.view.x;\n\t\t\t\tself.elmList[key].elm.content.y = self.elmList[key].elm.view.y;\n\t\t\t}\n\t\t\tframe++;\n\t\t\tif(frame == self.maxFrame) {\n\t\t\t\tif (self.maxLoopNum == -1) {\n\t\t\t\t\tframe = 0;\n\t\t\t\t} else {\n\t\t\t\t\tif (self.loopNum < self.maxLoopNum) {\n\t\t\t\t\t\tframe = 0;\n\t\t\t\t\t\tself.loopNum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tself.state = UIAnimate_State_Stop;\n\n\t\t\tif(self.completeFun!==null){\n\t\t\t\tself.completeFun(self.userData);\n\t\t\t}\n\t\t\tif(self.autoRemove===true){\n\t\t\t\tif(view.parent) {\n\t\t\t\t\tview.parent.removeChild(view);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tthis.run = function(){\n\n\t\tif(self.intervalFrame<self.interval){\n\t\t\tself.intervalFrame++;\n\n\t\t\trequestAnimationFrame(self.run);\n\t\t\treturn ;\n\t\t}\n\n\t\tself.intervalFrame = 0;\n\t\tself.doRun();\n\n\t};\n\n}","PIXI.settings.RENDER_OPTIONS.resolution = window.devicePixelRatio;\nPIXI.settings.RENDER_OPTIONS.autoResize = true;\n\n\nfunction UIManager(){\n\n\n\tthis.uiPool = {};\n\tthis.uiKeyPool = {};\n\tthis.loaderRes = null;\n\n\n\tthis.currentFile = null;\n\tthis.filePool = {};\n\n\tvar self = this;\n\n\tthis.loadURL = function(url,func,app){\n\n\n\n\t\tajax({\n\t\t\ttype:\"GET\",\n\t\t\turl:url,\n\t\t\tdataType:\"json\",\n\t\t\tdata:{},\n\t\t\tbeforeSend:function(){\n\t\t\t\t//some js code\n\t\t\t},\n\t\t\tsuccess:function(msg){\n\t\t\t\tgetData(msg);\n\t\t\t},\n\t\t\terror:function(){\n\t\t\t\tconsole.log(\"error\")\n\t\t\t}\n\t\t});\n\n\n\n\n\t\tfunction getData(obj){\n\n\t\t\tvar loader = new PIXI.loaders.Loader();\n\n\t\t\tvar options = {\n\t\t\t\tcrossOrigin: true\n\t\t\t};\n\n\t\t\tfor(var key in obj.resMap){\n\n\t\t\t\tloader.add(key, obj.resMap[key],options);\n\t\t\t}\n\t\t\tfunction onAssetsLoaded(loader,res){\n\t\t\t\tself.loaderRes = res;\n\t\t\t\tvar key ;\n\t\t\t\tfor(key in obj.fileMap){\n\t\t\t\t\tself.uiKeyPool[obj.fileMap[key].id] = obj.fileMap[key];\n\t\t\t\t\tself.uiKeyPool[obj.fileMap[key].fileName] = obj.fileMap[key];\n\t\t\t\t}\n\t\t\t\tfor(key in obj.fileMap){\n\t\t\t\t\tvar ui = new UILoader();\n\t\t\t\t\tUIManager.getInstance().currentFile = new UIData();\n\t\t\t\t\tUIManager.getInstance().currentFile.loadJson(obj.fileMap[key]);\n\n\t\t\t\t\tUIManager.getInstance().filePool[UIManager.getInstance().currentFile.fileName] = UIManager.getInstance().currentFile;\n\n\t\t\t\t\tif(app!==null && UIManager.getInstance().currentFile.autoResize){\n\t\t\t\t\t\tUIManager.getInstance().currentFile.width = app.renderer.width/PIXI.settings.RENDER_OPTIONS.resolution;\n\t\t\t\t\t\tUIManager.getInstance().currentFile.height = app.renderer.height/PIXI.settings.RENDER_OPTIONS.resolution;\n\t\t\t\t\t}\n\n\t\t\t\t\tui.loadJson(obj.fileMap[key]);\n\n\t\t\t\t\tvar uiAnimate = ui.getAnimate(\"default\");\n\t\t\t\t\tif(uiAnimate!==null){\n\t\t\t\t\t\tuiAnimate.play(-1);\n\t\t\t\t\t}\n\t\t\t\t\tuiAnimate = ui.getAnimate(\"default_once\");\n\t\t\t\t\tif(uiAnimate!==null){\n\t\t\t\t\t\tuiAnimate.play(1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(obj.fileMap[key].bindClassName!==\"\") {\n\t\t\t\t\t\tself.uiPool[obj.fileMap[key].fileName] = eval(\"new \" + obj.fileMap[key].bindClassName + \"(ui)\");\n\t\t\t\t\t}else{\n\t\t\t\t\t\tself.uiPool[obj.fileMap[key].fileName] = ui;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tfunc(self.uiPool);\n\t\t\t}\n\n\t\t\tloader.load(onAssetsLoaded);\n\n\n\n\t\t}\n\t};\n\tthis.createUIByName = function(name){\n\t\tvar ui = new UILoader();\n\t\tui.loadJson(self.uiKeyPool[name]);\n\n\t\tvar uiAnimate = ui.getAnimate(\"default\");\n\t\tif(uiAnimate!==null){\n\t\t\tuiAnimate.play(-1);\n\t\t}\n\t\tuiAnimate = ui.getAnimate(\"default_once\");\n\t\tif(uiAnimate!==null){\n\t\t\tuiAnimate.play(1);\n\t\t}\n\n\t\tvar res = null;\n\t\tif(self.uiKeyPool[name].bindClassName!==\"\") {\n\t\t\tres = eval(\"new \" + self.uiKeyPool[name].bindClassName + \"(ui);\");\n\t\t}else{\n\t\t\tres = ui;\n\t\t}\n\t\treturn res;\n\t};\n}\n\nUIManager.instance = null;\n\nUIManager.getInstance = function(){\n\tif(UIManager.instance===null){\n\t\tUIManager.instance = new UIManager();\n\t}\n\treturn UIManager.instance;\n};\n\nfunction UIBase(uiFile){\n\tthis.content = uiFile.content;\n\tthis.uiFile = uiFile;\n\tthis.onEnter = function(){\n\n\n\t};\n}\n","function getRandomNum(Min,Max)\r\n{   \r\n\tvar Range = Max - Min;   \r\n\tvar Rand = Math.random();   \r\n\treturn(Min + Math.round(Rand * Range));   \r\n}\r\n\r\nfunction alertLog(){\r\n\tvar arr = Array.prototype.slice.call(arguments);\r\n\talert(arr.join(\",\"));\r\n}\r\n\r\n\r\nfunction ajax(){\r\n\tvar ajaxData = {\r\n\t\ttype:arguments[0].type || \"GET\",\r\n\t\turl:arguments[0].url || \"\",\r\n\t\tasync:arguments[0].async || \"true\",\r\n\t\tdata:arguments[0].data || null,\r\n\t\tdataType:arguments[0].dataType || \"text\",\r\n\t\tcontentType:arguments[0].contentType || \"application/x-www-form-urlencoded\",\r\n\t\tbeforeSend:arguments[0].beforeSend || function(){},\r\n\t\tsuccess:arguments[0].success || function(){},\r\n\t\terror:arguments[0].error || function(){}\r\n\t}\r\n\tajaxData.beforeSend()\r\n\tvar xhr = createxmlHttpRequest();\r\n\txhr.responseType=ajaxData.dataType;\r\n\txhr.open(ajaxData.type,ajaxData.url,ajaxData.async);\r\n\txhr.setRequestHeader(\"Content-Type\",ajaxData.contentType);\r\n\txhr.send(convertData(ajaxData.data));\r\n\txhr.onreadystatechange = function() {\r\n\t\tif (xhr.readyState == 4) {\r\n\t\t\tif(xhr.status == 200){\r\n\t\t\t\tajaxData.success(xhr.response)\r\n\t\t\t}else{\r\n\t\t\t\tajaxData.error()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction createxmlHttpRequest() {\r\n\tif (window.ActiveXObject) {\r\n\t\treturn new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t} else if (window.XMLHttpRequest) {\r\n\t\treturn new XMLHttpRequest();\r\n\t}\r\n}\r\n\r\nfunction convertData(data){\r\n\tif( typeof data === 'object' ){\r\n\t\tvar convertResult = \"\" ;\r\n\t\tfor(var c in data){\r\n\t\t\tconvertResult+= c + \"=\" + data[c] + \"&\";\r\n\t\t}\r\n\t\tconvertResult=convertResult.substring(0,convertResult.length-1)\r\n\t\treturn convertResult;\r\n\t}else{\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\n\r\n\r\n"]}